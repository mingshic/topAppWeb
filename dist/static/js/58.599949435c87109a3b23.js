webpackJsonp([58],{Ifee:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("eMYz"),i=e("DxVv"),l=e("Z1y9"),o={name:"bid",components:{headerLast:a.a,loadingtmp:i.a},data:function(){return{bidListTit:"单次报价列表",page:1,pageSize:10,busy:!0,loadall:!1,bidList:[],staffQuoterName:"",partsQuoterName:"",saleQuoterName:"",productQuoterName:"",relate:this.$route.query.relate,status:this.$route.query.status}},created:function(){console.log(this.$route.meta.savedPosition),this.$route.meta.isUseCache||(this.eventListArr=[],this.page=1,this.loadall=!1,this.busy=!1,this.loadMore()),this.$route.meta.isUseCache=!1},methods:{getBidList:function(){var t=this,s=(this.page,this.pageSize,this.page>1);"deal"==this.relate?l.a.get("?action=/once/queryOnceOpBid&STATUS="+this.status,{}).then(function(e){console.log("status",e),t.bidList=s?t.bidList.concat(e.data):e.data,0==e.data.length||e.data.length<t.pageSize?(t.busy=!1,t.loadall=!0):(t.busy=!1,t.page++)}):l.a.get("?action=/once/queryOnceBidListO2O&STATUS="+this.status,{}).then(function(e){console.log("status",e),t.bidList=s?t.bidList.concat(e.datas):e.datas,0==e.datas.length||e.datas.length<t.pageSize?(t.busy=!1,t.loadall=!0):(t.busy=!1,t.page++)})},loadMore:function(){var t=this;console.log(this.busy,this.loadall),this.busy||this.loadall||(this.busy=!0,setTimeout(function(){t.getBidList()},500))},getCaseType:function(t){for(var s=[{dictID:"1",dictName:"故障"},{dictID:"2",dictName:"RMA"},{dictID:"3",dictName:"巡检"},{dictID:"4",dictName:"技术咨询"},{dictID:"5",dictName:"非故障技术支持"}],e=0;e<s.length;e++)if(s[e].dictID==t)return s[e].dictName},choiseQuoterName:function(t){return null==t.staffQuoterName?t.partsQuoterName:t.staffQuoterName},choisePriceType:function(t){return 1==t?"人员":2==t?"备件":void 0}}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"bidListView"},[e("header-last",{attrs:{title:t.bidListTit}}),t._v(" "),e("div",{staticStyle:{height:"0.45rem"}}),t._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"content",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[t._l(t.bidList,function(s){return e("div",{key:s.id,staticClass:"bidListCell"},[e("div",{staticClass:"panel"},[e("div",{staticClass:"title"},[e("div",[t._v(t._s(s.createdOn))]),t._v(" "),e("div",[t._v(t._s(s.code))])])]),t._v(" "),e("div",{staticClass:"split"}),t._v(" "),e("ul",{staticClass:"tableTd"},[e("li",[e("span",{staticClass:"tit"},[t._v("项目名称")]),t._v(" "),e("span",{staticStyle:{color:"#333333"}},[t._v(t._s(s.projectName))])]),t._v(" "),e("li",[e("span",{staticClass:"tit"},[t._v("事件类型")]),t._v(" "),e("span",{staticStyle:{color:"#333333"}},[t._v(t._s(t.getCaseType(s.caseType)))])]),t._v(" "),e("li",[e("span",{staticClass:"tit"},[t._v("事件描述")]),t._v(" "),e("span",{staticStyle:{color:"#333333"}},[t._v(t._s(s.remark))])]),t._v(" "),e("li",[e("span",{staticClass:"titpart"},[t._v("报价类型")]),t._v(" "),e("span",{staticStyle:{color:"#333333"}},[t._v(t._s(t.choisePriceType(s.priceType)))])]),t._v(" "),e("li",[e("span",{staticClass:"titpart"},[t._v("报价人")]),t._v(" "),e("span",{staticStyle:{color:"#333333"}},[t._v(t._s(t.choiseQuoterName(s)))])]),t._v(" "),e("li",[e("span",{staticClass:"titpart"},[t._v("销售确认人")]),t._v(" "),e("span",{staticStyle:{color:"#333333"}},[t._v(t._s(s.saleQuoterName))])]),t._v(" "),e("li",[e("span",{staticClass:"titpart"},[t._v("分摊报价人")]),t._v(" "),e("span",{staticStyle:{color:"#333333"}},[t._v(t._s(s.productQuoterName))])]),t._v(" "),e("li",[e("span",{staticClass:"tit"},[t._v("服务内容")]),t._v(" "),e("span",{staticStyle:{color:"#333333"}},[t._v(t._s(s.serviceContent))])]),t._v(" "),e("div",{staticClass:"btns"},[e("el-row",[e("router-link",{attrs:{to:{name:"bidDescriptView",query:{processinstId:s.processinstid,num:s.num,caseId:s.caseId,relate:t.relate,status:t.status}}}},[e("el-button",{attrs:{type:"primary"}},[t._v("查看详情")])],1),t._v(" "),e("router-link",{attrs:{to:{name:"bidPriceProgress",query:{caseId:s.caseId,num:s.num}}}},[e("el-button",{attrs:{type:"primary"}},[t._v("查看进展")])],1)],1)],1)])])}),t._v(" "),e("loadingtmp",{attrs:{busy:t.busy,loadall:t.loadall}})],2)],1)},staticRenderFns:[]};var n=e("VU/8")(o,r,!1,function(t){e("xwgP")},"data-v-5a9a5d9a",null);s.default=n.exports},xwgP:function(t,s){}});