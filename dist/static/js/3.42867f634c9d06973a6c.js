webpackJsonp([3],{"/Xgt":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("77PY"),i=e("DxVv"),l=(e("YF26"),e("Z1y9")),o={name:"workBenchMyEvent",components:{headerBase:s.a,loadingtmp:i.a},data:function(){return{workBenchMyEventTit:"我的事件",opinionTab:[{name:"first",label:"执行中",eventListArr:[],numname:"unCloseNum"},{name:"second",label:"已关闭",eventListArr:[],numname:"closeNum"},{name:"third",label:"全部",eventListArr:[],numname:"allNum"}],activeName:"first",searchpage:1,isSearch:0,page:1,pageSize:10,busy:!1,loadall:!1,tab_box:1,searchData:{industry:[],type:[]},objpages:{first:{page:1,loadall:!1,IF_CLOSE:"N",idx:0,isSearch:0},second:{page:1,loadall:!1,IF_CLOSE:"Y",idx:1,isSearch:0},third:{page:1,loadall:!1,IF_CLOSE:"",idx:2,isSearch:0}},totalData:{unCloseNum:0,closeNum:0,allNum:0}}},created:function(){},activated:function(){this.$route.meta.isUseCache||(this.busy=!1,this.loadall=!1,this.page=1,this.objpages.first.page=1,this.objpages.first.loadall=!1,this.opinionTab[0].eventListArr=[],this.objpages.second.loadall=!1,this.opinionTab[1].eventListArr=[],this.objpages.third.loadall=!1,this.opinionTab[2].eventListArr=[],this.loadMore()),this.$route.meta.isUseCache=!1},methods:{tabClick:function(a){console.log("tabclick");var t=this.objpages[this.activeName];if(this.loadall=t.loadall,this.isSearch!=t.isSearch)return t.page=1,t.loadall=!1,t.eventListArr=[],t.isSearch=this.isSearch,void this.loadMore();1!=t.page||t.loadall||this.loadMore()},returnList:function(a,t,e){return e=a?e.concat(t.data):t.data,0==t.data.length||t.data.length<this.pageSize?(this.busy=!1,this.loadall=!0,this.objpages[this.activeName].loadall=!0):(this.busy=!1,this.objpages[this.activeName].page++),e},getEventList:function(){var a=this,t=this.objpages[this.activeName].page>1,e=this.objpages[this.activeName],s={PAGE_NUM:e.page,PAGE_TOTAL:this.pageSize,IF_CLOSE:e.IF_CLOSE};this.isSearch&&(console.log("searchData",this.searchData),s.INDUSTRY_NAME=this.searchData.industry.join(","),s.CASE_TYPEID=this.searchData.type.join(","),s.CUST_NAME=this.searchData.customer,s.PROJECT_NAME=this.searchData.proName,s.PM_NAME=this.searchData.PM,s.CASE_CD=this.searchData.eventNum,s.KEYWORD=this.searchData.keyWord,s.SALE_NAME=this.searchData.sale,s.START_TIME=this.searchData.startTime,s.END_TIME=this.searchData.endTime),console.log("SSS_params",s),l.a.get("?action=GetCaseList&TYPE=my",s).then(function(s){if(console.log(s),"0"==s.STATUSCODE){var i=a.opinionTab[e.idx].eventListArr;a.opinionTab[e.idx].eventListArr=a.returnList(t,s,i),a.totalData=s.totalData,console.log(a.totalData)}})},loadMore:function(){var a=this;if(this.busy||this.objpages[this.activeName].loadall)return!1;this.busy=!0,console.log("loadMore"),setTimeout(function(){a.getEventList()},500)},getSearParams:function(a){console.log(a),this.activeName="third",this.objpages.third.page=1,this.objpages.third.loadall=!1,this.opinionTab[2].eventListArr=[],this.loadall=!1,this.objpages.third.isSearch=1,this.isSearch=1,this.searchData=a,this.loadMore(),this.objpages.first.isSearch=0,this.objpages.first.loadall=!1,this.opinionTab[0].eventListArr=[],this.objpages.second.isSearch=0,this.objpages.second.loadall=!1,this.opinionTab[1].eventListArr=[]}}},n={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"workBenchMyEventView"},[e("header-base",{attrs:{title:a.workBenchMyEventTit,queryData:a.searchData},on:{searchPro:a.getSearParams}}),a._v(" "),e("div",{staticStyle:{height:"0.45rem"}}),a._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:a.loadMore,expression:"loadMore"}],staticClass:"content",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[e("el-tabs",{on:{"tab-click":a.tabClick},model:{value:a.activeName,callback:function(t){a.activeName=t},expression:"activeName"}},[a._l(a.opinionTab,function(t){return[e("el-tab-pane",{key:t.id,attrs:{label:t.label+"("+a.totalData[t.numname]+")",name:t.name}},[a._l(t.eventListArr,function(t){return e("div",{key:t.id,staticClass:"eventCell"},[e("router-link",{attrs:{to:{name:"eventShow",query:{caseId:t.CASE_ID}}}},[e("div",{staticClass:"cellTop"},[e("el-row",[e("el-col",{attrs:{span:1}},[e("span",{staticClass:"spheathcolor",class:"spheathcolor"+t.CASE_HEALTH})]),a._v(" "),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"cellTopNum"},[a._v("\n                    "+a._s(t.CASE_NO)+"\n                    "),e("span",{staticClass:"speventlevel",class:"speventlevelcolor"},[a._v(a._s(t.CASE_LEVEL))])])]),a._v(" "),e("el-col",{attrs:{span:11}},[e("div",{staticClass:"cellTopTime"},[e("span",[a._v(a._s(t.CREATE_DATE))])])])],1)],1),a._v(" "),e("div",{staticClass:"cellContent"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"tit"},[a._v("状态：")]),e("span",[a._v(a._s(t.DEAL_STATUS_NAME))])]),a._v(" "),e("el-col",{attrs:{span:12}},[e("span",{staticClass:"tit"},[a._v("类型：")]),e("span",[a._v(a._s(t.CASE_TYPE))])])],1),a._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"tit"},[a._v("厂商：")]),e("span",[a._v(a._s(t.FACTORY))])]),a._v(" "),e("el-col",{attrs:{span:12}},[e("span",{staticClass:"tit"},[a._v("型号：")]),e("span",[a._v(a._s(t.DEVICE))])])],1),a._v(" "),e("el-row",[e("el-col",{attrs:{span:24}},[e("span",{staticClass:"tit"},[a._v("序列号：")]),e("span",[a._v(a._s(t.SN))])])],1),a._v(" "),e("el-row",[e("el-col",{attrs:{span:24}},[e("span",{staticClass:"tit"},[a._v("说明：")]),e("span",[a._v(a._s(t.PROBLEM_DETAIL))])])],1)],1)])],1)}),a._v(" "),e("loadingtmp",{attrs:{busy:a.busy,loadall:a.loadall}})],2)]})],2)],1)],1)},staticRenderFns:[]};var r=e("VU/8")(o,n,!1,function(a){e("bguL")},"data-v-63e839ee",null);t.default=r.exports},bguL:function(a,t){}});