webpackJsonp([46],{"K0/B":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("77PY"),i=(a("YF26"),a("Z1y9")),o=a("DxVv"),n={name:"workBenchPOStaff",components:{headerBase:s.a,loadingtmp:o.a},data:function(){return{workBenchPOStaffTit:"PO信息-人员",searchType:"POStaffInfo",tableData:[],workBenchPOStaffObj:[{prop:"SUPPLIER_NAME",label:"姓名",width:"25%"},{prop:"POTYPENAME",label:"类型",width:"25%"},{prop:"PAYPLAN_ACTUALDATE",label:"实际支付日期",width:"25%"},{prop:"TOTALAMOUNT",label:"金额",width:"25%"}],page:1,pageSize:30,busy:!1,loadall:!1,tableHeight:400,isSearch:!1,searchData:{}}},created:function(){this.getPOStaffList()},mounted:function(){var e=this;this.$nextTick(function(){var t=e;console.log("ssssssss",e.type),e.tableHeight=document.documentElement.clientHeight-45,window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-45}})},methods:{getPOStaffList:function(){var e=this,t={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize,TYPE:"1",YM:this.$route.query.YM};console.log(t),this.isSearch&&(t.SUPPLIER_NAME=this.searchData.supplyName,t.START_TIME=this.searchData.startTime,t.END_TIME=this.searchData.endTime);var a=this.page>1;i.a.get("?action=/po/GetPOList",t).then(function(t){console.log("222222",t),e.tableData=a?e.tableData.concat(t.data):t.data,0==t.data.length||t.data.length<e.pageSize?(e.busy=!0,e.loadall=!0,e.$message({message:"已加载全部数据",type:"success",center:!0,duration:1e3,customClass:"msgdefine"})):(e.busy=!1,e.page++)})},rowClick:function(e){console.log("row",e),this.$router.push({name:"workBenchPOPayDetail",query:{type:"1",payPlanId:e.PAYPLAN_ID}})},loadMore:function(){var e=this;if(console.log("this.busy:",this.busy),this.busy)return!1;this.busy=!0,setTimeout(function(){e.getPOStaffList()},1e3)},searchList:function(e){console.log("formData",e),this.searchData=e,this.tableData=[],this.busy=!1,this.isSearch=!0,this.page=1,this.loadall=!1,this.loadMore()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"workBenchPOStaffView"},[a("header-base",{attrs:{title:e.workBenchPOStaffTit,searchType:e.searchType,queryData:e.searchData},on:{searchPro:e.searchList}}),e._v(" "),a("div",{staticStyle:{height:"0.45rem"}}),e._v(" "),a("div",{staticClass:"workBenchPOStaffContent"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.busy&&!e.loadall,expression:"busy && !loadall"},{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{stripe:"","element-loading-text":"正在加载下一页",data:e.tableData,height:e.tableHeight},on:{"row-click":e.rowClick}},[e._l(e.workBenchPOStaffObj,function(e){return[a("el-table-column",{key:e.id,attrs:{prop:e.prop,label:e.label,"min-width":e.width}})]})],2)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(n,l,!1,function(e){a("g0uw")},"data-v-cf33b1c0",null);t.default=r.exports},g0uw:function(e,t){}});