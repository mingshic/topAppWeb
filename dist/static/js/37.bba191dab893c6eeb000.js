webpackJsonp([37],{"ON+8":function(e,t){},dSXm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("eMYz"),l=(a("YF26"),a("Z1y9")),c=["移动","联通","电信","金融","政府","企事业","其他"],i=["IBM","HP","DELL","EMC","H3C","其他"],r=["一级","二级","三级","四级"],h=["小型机","X86刀片","交换机","PC服务器","存储磁盘","其他"],o={name:"workBenchEventInfo",components:{headerLast:n.a},data:function(){return{workBenchEventInfoTit:"事件信息",form:{date1:this.getFormerTime(1)[0],date2:this.getCurrentTime(1)[0]},checkAllH:!1,checkAllC:!1,checkAllS:!1,checkAllJ:!1,INDUSTRYS_toID:{"移动":"001","联通":"002","电信":"003","金融":"004","政府":"005","企事业":"006","其他":"007"},INDUSTRYS:c,FACTORYS:i,CASE_LEVELS:r,TECHS:h,checkedH:["移动","联通","电信","金融","其他"],checkedC:["IBM"],checkedS:["二级","三级"],checkedJ:["PC服务器"],isIndeterminateH:!0,isIndeterminateC:!0,isIndeterminateS:!0,isIndeterminateJ:!0,tableData:[],checkI:"",checkS:"",checkJ:"",checkC:"",workBenchEventInfoObj:[{prop:"INDUSTRY",label:"行业",width:"25%"},{prop:"FAULT_NUM",label:"故障类",width:"25%"},{prop:"NON_FAULT_NUM",label:"非故障类",width:"25%"},{prop:"total",label:"总计",width:"25%"}],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},backUrl:"workBench",busy:!0,loadall:!1}},created:function(){void 0!=this.$route.query.date1&&(this.form.date1=this.$route.query.date1,this.form.date2=this.$route.query.date2),this.returnList()},methods:{returnList:function(){var e=this;this.checkI=this.industryId().join(","),this.checkS=this.checkedS.join(","),this.checkJ=this.checkedJ.join(","),this.checkC=this.checkedC.join(",");var t={INDUSTRY_NAME:this.checkI,CASE_LEVEL:this.checkS,TECH_NAME:this.checkJ,FACTORY_NAME:this.checkC,START_TIME:this.form.date1,END_TIME:this.form.date2};l.a.get("?action=GetCaseStat",t).then(function(t){e.tableData=t.data,console.log(t.data);for(var a=e,n=0;n<e.tableData.length;n++){var l=e.tableData[n].FAULT_NUM+e.tableData[n].NON_FAULT_NUM;a.tableData[n]={INDUSTRY:a.tableData[n].INDUSTRY,INDUSTRY_ID:a.tableData[n].INDUSTRY_ID,FAULT_NUM:a.tableData[n].FAULT_NUM,NON_FAULT_NUM:a.tableData[n].NON_FAULT_NUM,total:l}}e.busy=!1,e.loadall=!0})},getSummaries:function(e){var t=e.columns,a=e.data,n=[];return t.forEach(function(e,t){if(0!==t){var l=a.map(function(t){return Number(t[e.property])});l.every(function(e){return isNaN(e)})?n[t]="N/A":n[t]=l.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0)}else n[t]="合计"}),n},rowClick:function(e){console.log("aaaaaaaaaaaaa",e),this.$router.push({name:"workBenchEventInfoShow",query:{INDUSTRY_NAME:e.INDUSTRY_ID,CASE_LEVEL:this.checkS,TECH_NAME:this.checkJ,FACTORY_NAME:this.checkC,date1:this.form.date1,date2:this.form.date2}})},searchInfo:function(){this.returnList()},standardDate:function(e){for(var t=[],a=arguments.length,n=Array(a>1?a-1:0),l=1;l<a;l++)n[l-1]=arguments[l];return n.forEach(function(e){e.toString().length<2?t.push("0"+e):t.push(e)}),t.join("-")},getFormerTime:function(e){var t=(new Date).getFullYear()-1,a=[];a.unshift(this.standardDate("",t,(new Date).getMonth()+1,(new Date).getDate()));for(var n=1;n<e;n++)a.unshift(t-n+"1231");return a},getCurrentTime:function(e){var t=(new Date).getFullYear(),a=[];a.unshift(this.standardDate("",t,(new Date).getMonth()+1,(new Date).getDate()));for(var n=1;n<e;n++)a.unshift(t-n+"1231");return a},noKeyword:function(){document.activeElement.blur()},industryId:function(){for(var e=[],t=0;t<this.checkedH.length;t++)e.push(this.INDUSTRYS_toID[this.checkedH[t]]);return e},handleCheckAllChangeH:function(e){console.log(e),this.checkedH=e?c:[],this.isIndeterminateH=!1,console.log(this.checkedH)},handleCheckedChangeH:function(e){console.log("111",e);var t=e.length;this.checkAllH=t===this.INDUSTRYS.length,this.isIndeterminateH=t>0&&t<this.INDUSTRYS.length},handleCheckAllChangeC:function(e){console.log(e),this.checkedC=e?i:[],this.isIndeterminateC=!1,console.log(this.checkedC)},handleCheckedChangeC:function(e){console.log("222",e);var t=e.length;this.checkAllC=t===this.FACTORYS.length,this.isIndeterminateC=t>0&&t<this.FACTORYS.length},handleCheckAllChangeS:function(e){this.checkedS=e?r:[],this.isIndeterminateS=!1},handleCheckedChangeS:function(e){var t=e.length;this.checkAllS=t===this.CASE_LEVELS.length,this.isIndeterminateS=t>0&&t<this.CASE_LEVELS.length},handleCheckAllChangeJ:function(e){this.checkedJ=e?h:[],this.isIndeterminateJ=!1},handleCheckedChangeJ:function(e){var t=e.length;this.checkAllJ=t===this.TECHS.length,this.isIndeterminateJ=t>0&&t<this.TECHS.length}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"workBenchEventInfoView"},[a("header-last",{attrs:{title:e.workBenchEventInfoTit,backUrl:e.backUrl}}),e._v(" "),a("div",{staticStyle:{height:"0.45rem"}}),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"searchView"},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"行业：","label-width":"0.8rem"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminateH},on:{change:e.handleCheckAllChangeH},model:{value:e.checkAllH,callback:function(t){e.checkAllH=t},expression:"checkAllH"}},[e._v("全选")])],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-checkbox-group",{attrs:{size:"mini"},on:{change:e.handleCheckedChangeH},model:{value:e.checkedH,callback:function(t){e.checkedH=t},expression:"checkedH"}},e._l(e.INDUSTRYS,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"厂商：","label-width":"0.8rem"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminateC},on:{change:e.handleCheckAllChangeC},model:{value:e.checkAllC,callback:function(t){e.checkAllC=t},expression:"checkAllC"}},[e._v("全选")])],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-checkbox-group",{attrs:{size:"mini"},on:{change:e.handleCheckedChangeC},model:{value:e.checkedC,callback:function(t){e.checkedC=t},expression:"checkedC"}},e._l(e.FACTORYS,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"事件级别：","label-width":"0.8rem"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminateS},on:{change:e.handleCheckAllChangeS},model:{value:e.checkAllS,callback:function(t){e.checkAllS=t},expression:"checkAllS"}},[e._v("全选")])],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-checkbox-group",{attrs:{size:"mini"},on:{change:e.handleCheckedChangeS},model:{value:e.checkedS,callback:function(t){e.checkedS=t},expression:"checkedS"}},e._l(e.CASE_LEVELS,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"技术方向：","label-width":"0.8rem"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminateJ},on:{change:e.handleCheckAllChangeJ},model:{value:e.checkAllJ,callback:function(t){e.checkAllJ=t},expression:"checkAllJ"}},[e._v("全选")])],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-checkbox-group",{attrs:{size:"mini"},on:{change:e.handleCheckedChangeJ},model:{value:e.checkedJ,callback:function(t){e.checkedJ=t},expression:"checkedJ"}},e._l(e.TECHS,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间：","label-width":"0.8rem"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"date1"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},on:{focus:e.noKeyword},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:1}},[e._v("~")]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"date2"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{size:"mini",type:"date",placeholder:"请选择日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},on:{focus:e.noKeyword},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.searchInfo}},[e._v("查询")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{height:"1.6rem"}}),e._v(" "),a("div",{staticClass:"tableView"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.busy&&!e.loadall,expression:"busy && !loadall"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"summary-method":e.getSummaries,"show-summary":"","max-height":"437"},on:{"row-click":e.rowClick}},[e._l(e.workBenchEventInfoObj,function(e){return[a("el-table-column",{key:e.id,attrs:{prop:e.prop,label:e.label,"min-width":e.width}})]})],2)],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(o,s,!1,function(e){a("n6Or"),a("ON+8")},"data-v-09cf020e",null);t.default=d.exports},n6Or:function(e,t){}});