webpackJsonp([70],{S2mN:function(a,e){},lpu7:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("77PY"),n=(t("YF26"),t("Z1y9")),s={name:"opinion",components:{headerBase:i.a},data:function(){return{opinionTit:"意见和投诉",opinionSearchType:"opnion1",POinfoTab:[{name:"first",label:"意见投诉",tableData:[]},{name:"second",label:"项目满意度",tableData:[]},{name:"third",label:"Case评价",tableData:[]}],activeName:"first",opinionTableOne:[{prop:"PROJECT_NAME",label:"项目名称",fixed:!0,width:"58%"},{prop:"CASE_CD",label:"事件编号",fixed:!0,width:"30%"},{prop:"TOTAL_SCORE",label:"分值",fixed:!0,width:"12%"}],opinionTableTwo:[{prop:"PROJECT_NAME",label:"项目名称",fixed:!0,width:"50%"},{prop:"TOTAL_SCORE",label:"分值",fixed:!0,width:"12%"},{prop:"EVALUATE_FROM_NAME",label:"评价人",fixed:!0,width:"16%"},{prop:"EVALUATE_TIME",label:"评价时间",fixed:!0,width:"22%"}],opinionTableThree:[{prop:"COMPLAINT_COMMENT",label:"意见内容",fixed:!0,width:"78%"},{prop:"CREATE_ON",label:"提交日期",fixed:!0,width:"22%"}],busy:!1,loadall:!1,page:1,pageSize1:10,pageSize2:15,pageSize3:15,isSearch1:!1,isSearch2:!1,isSearch3:!1,searchData1:{},searchData2:{},searchData3:{}}},methods:{getEventList:function(){var a=this,e={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize1};this.isSearch1&&(params.INDUSTRY_NAME=this.searchData.industry.join(","),params.BUSINESS_TYPE=this.searchData.business.join(","),params.CUST_NAME=this.searchData.customer,params.PROJECT_NAME=this.searchData.proName,params.PM_NAME=this.searchData.PM,params.SALE_NAME=this.searchData.sale,params.START_TIME=this.searchData.startTime,params.END_TIME=this.searchData.endTime),n.a.get("?action=GetComplaintsList",e).then(function(e){a.POinfoTab[0].tableData=e.data;var t=e.data;t=t.map(function(a){return a.COMPLAINT_COMMENT=a.COMPLAINT_COMMENT.replace(/\n/g,"<br/>"),a})});var t={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize2};n.a.get("?action=GetProjectEvaluate",t).then(function(e){a.POinfoTab[1].tableData=e.data});var i={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize3};n.a.get("?action=GetCaseEvaluate",i).then(function(e){a.POinfoTab[2].tableData=e.data})},loadMore:function(){var a=this;this.busy=!0,setTimeout(function(){a.getEventList()},500)},searchList:function(a){console.log(a),"opnion1"==this.opinionSearchType?(this.isSearch1=!0,this.searchData1=a):"opnion2"==this.opinionSearchType?(this.isSearch2=!0,this.searchData2=a):"opnion3"==this.opinionSearchType&&(this.isSearch3=!0,this.searchData3=a)}},created:function(){this.getEventList()},watch:{activeName:function(a){"first"==a?this.opinionSearchType="opnion1":"second"==a?this.opinionSearchType="opnion2":"third"==a&&(this.opinionSearchType="opnion3")}}},o={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"opinionView"},[t("header-base",{attrs:{title:a.opinionTit,searchType:a.opinionSearchType},on:{searchPro:a.searchList}}),a._v(" "),t("div",{staticStyle:{height:"0.45rem"}}),a._v(" "),t("div",{staticClass:"content"},[t("el-tabs",{model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},[a._l(a.POinfoTab,function(e){return[t("el-tab-pane",{key:e.id,attrs:{label:e.label,name:e.name}},[t("el-table",{staticStyle:{width:"100%",border:"0.01rem solid #e1e1e1"},attrs:{data:e.tableData}},[a._l(a.opinionTableOne,function(i){return"Case评价"===e.label?[t("el-table-column",{key:i.id,staticClass:"caseTable",attrs:{fixed:i.fixed,prop:i.prop,label:i.label,"min-width":i.width},scopedSlots:a._u([{key:"default",fn:function(e){return[t("span",{staticClass:"table_name"},[a._v(a._s(e.row[i.prop]))])]}}])})]:a._e()}),a._v(" "),a._l(a.opinionTableTwo,function(i){return"项目满意度"===e.label?[t("el-table-column",{key:i.id,attrs:{fixed:i.fixed,prop:i.prop,label:i.label,"min-width":i.width},scopedSlots:a._u([{key:"default",fn:function(e){return[t("span",{staticClass:"table_name"},[a._v(a._s(e.row[i.prop]))])]}}])})]:a._e()}),a._v(" "),a._l(a.opinionTableThree,function(i){return"意见投诉"===e.label?[t("el-table-column",{key:i.id,staticClass:"opinion",attrs:{fixed:i.fixed,prop:i.prop,label:i.label,"min-width":i.width},scopedSlots:a._u([{key:"default",fn:function(e){return[t("router-link",{attrs:{to:{name:"mineFeedbackShow",query:{complantId:e.row.COMPLANT_ID}}}},[t("span",{staticClass:"table_name"},[a._v(a._s(e.row[i.prop]))])])]}}])})]:a._e()})],2)],1)]})],2)],1)],1)},staticRenderFns:[]};var r=t("VU/8")(s,o,!1,function(a){t("S2mN")},"data-v-1ab532bc",null);e.default=r.exports}});