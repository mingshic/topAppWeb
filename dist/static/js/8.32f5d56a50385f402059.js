webpackJsonp([8],{"9aql":function(t,e){},Cl13:function(t,e){},DzNb:function(t,e){},"G//R":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("YF26"),n=a("eMYz"),s=a("Z1y9"),o=a("DxVv"),r={name:"proHealth",props:{prohealthpage:Number},components:{loadingtmp:o.a},data:function(){return{dataArray:[],situationArr:[],evaluateArr:[],riskArr:[],busy:!0,loadall:!1}},created:function(){var t=this;s.a.get("?action=GetProjectHealthList&PROJECT_ID="+this.$route.query.projectId,{}).then(function(e){for(var a=-1,i=0,n="",s=[],o=0;o<e.data.length;o++){var r=e.data[o];n!=r.GROUP_NAME?(n=r.GROUP_NAME,s[++a]=[],i=0):i++,s[a][i]=r}t.dataArray=s,t.busy=!1,t.loadall=!0})},methods:{},watch:{prohealthpage:function(t,e){console.log(t,e)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"proHealthView"},[t._l(t.dataArray,function(e){return a("div",{key:e[0].GROUP_NAME,staticClass:"proHealthCell"},[a("div",{staticClass:"proHealthTit"},[t._v(t._s(e[0].GROUP_NAME))]),t._v(" "),t._m(0,!0),t._v(" "),t._l(e,function(e){return a("div",{key:e.ITEM_NAME,staticClass:"content"},[1==e.IF_PARENT?a("ul",{staticClass:"tableTh"},[a("li",[t._v(t._s(e.ITEM_NAME))])]):t._e(),t._v(" "),1!=e.IF_PARENT?a("ul",{staticClass:"tableTd"},[a("li",[a("span",[t._v(t._s(e.ITEM_NAME))]),t._v(" "),a("span",[t._v(t._s(e.ITEM_RESULT))]),t._v(" "),a("span",[t._v(t._s(e.ITEM_SCORE))])])]):t._e()])})],2)}),t._v(" "),a("loadingtmp",{attrs:{busy:t.busy,loadall:t.loadall}})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("ul",{staticClass:"tableTh"},[e("li",{staticStyle:{background:"#fafafa!important"}},[e("span",[this._v("检查项")]),this._v(" "),e("span",[this._v("内容")]),this._v(" "),e("span",[this._v("加减分")])])])])}]};var c=a("VU/8")(r,l,!1,function(t){a("Cl13")},"data-v-18a01866",null).exports,p={name:"proMachine",props:["promachinepage","searData"],components:{loadingtmp:o.a},data:function(){return{form:{firm:"",typeNum:"",serialNum:""},tableData:[{FACTORY_NM:"HP",type:"DL380G6",serial:"CNG944S1VT",startTime:"2017-01-01",endTime:"2017-01-01"}],proMachineObj:[{prop:"FACTORY_NM",lable:"厂商",width:"30%"},{prop:"MODEL_NAME",lable:"型号",width:"30%"},{prop:"SN",lable:"序列号",width:"40%"},{prop:"SERVICE_BEGIN",lable:"开始日期",width:"30px"},{prop:"SERVICE_END",lable:"结束日期",width:"30px"}],projectId:this.$route.query.projectId,pageSize:10,busy:!1,loadall:!1}},created:function(){console.log(this.promachinepage)},methods:{onSubmit:function(){this.loadmachine(this.promachinepage>1),this.$emit("emitparams",this.searparams)},loadmachine:function(t){var e=this,a={PROJECT_ID:this.projectId,PAGE_NUM:this.promachinepage,PAGE_TOTAL:this.pageSize};a.FACTORY_NAME=this.form.firm,a.MODEL_NAME=this.form.typeNum,a.SN=this.form.serialNum,console.log(a),s.a.get("?action=GetProjectDeviceList&EMPID="+i.a.empId,a).then(function(a){e.tableData=t?e.tableData.concat(a.data):a.data,console.log(a.data),0==a.data.length||a.data.length<e.pageSize?(e.busy=!0,e.loadall=!0):e.busy=!1,e.$emit("emitbusy",{busy:!1,loadall:e.loadall})})}},mounted:function(){this.loadmachine(this.promachinepage>1)},watch:{changehappen:function(t,e){},promachinepage:function(t,e){console.log(t+"||"+e),this.loadmachine(this.promachinepage>1)},searData:function(t,e){}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"proMachineView"},[a("div",{staticClass:"proMachineTop"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入厂商"},model:{value:t.form.firm,callback:function(e){t.$set(t.form,"firm",e)},expression:"form.firm"}})],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入型号"},model:{value:t.form.typeNum,callback:function(e){t.$set(t.form,"typeNum",e)},expression:"form.typeNum"}})],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入序列号"},model:{value:t.form.serialNum,callback:function(e){t.$set(t.form,"serialNum",e)},expression:"form.serialNum"}})],1),t._v(" "),a("el-form-item",[a("el-button",{on:{click:t.onSubmit}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"proMachineBtm"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[t._l(t.proMachineObj,function(t){return[a("el-table-column",{key:t.id,attrs:{prop:t.prop,label:t.lable,"min-width":t.width}})]})],2)],1),t._v(" "),a("loadingtmp",{attrs:{busy:t.busy,loadall:t.loadall}})],1)},staticRenderFns:[]};var h=a("VU/8")(p,d,!1,function(t){a("wOld"),a("ud8f")},"data-v-7836bd36",null).exports,m={name:"proPlan",components:{loadingtmp:o.a},data:function(){return{tableData:[],table_arr:[{prop:"PLAN_NAME",label:"巡检批次",fixed:!0,width:"40%"},{prop:"PLAN_START_DATE",label:"计划开始时间",fixed:!0,width:"30%"},{prop:"PLAN_END_DATE",label:"计划结束时间",fixed:!0,width:"30%"}],page:1,pageSize:5,total:0,busy:!1,loadall:!1}},created:function(){this.getEventList(this.page)},methods:{loadMore:function(){var t=this;this.busy=!0,this.loadall=!1,setTimeout(function(){t.getEventList(t.page)},500)},getEventList:function(t){var e=this;if(!this.loadall){s.a.get("?action=GetProjectInspectionPlan",{PROJECT_ID:this.$route.query.projectId}).then(function(a){if(e.total=a.data.length,1==t){for(var i=0;i<10;i++)e.tableData=e.tableData.concat(a.data[i]);e.page++}if(t>1&&e.tableData.length<e.total){e.tableData=[];for(var n=0;n<10*t;n++)e.tableData=e.tableData.concat(a.data[n]);e.busy=!1,e.loadall=!1,e.page++,console.log(2)}e.loadall=!0,e.busy=!1})}}},watch:{proplanpag:function(t,e){console.log(t+"||"+e)}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"proPlanView"},[a("div",{staticClass:"proPlanCell"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[t._l(t.table_arr,function(e){return[a("el-table-column",{key:e.id,attrs:{prop:e.prop,label:e.label,"min-width":e.width}},[[a("loadingtmp",{attrs:{busy:t.busy,loadall:t.loadall}})]],2)]})],2)],1),t._v(" "),a("loadingtmp",{attrs:{busy:t.busy,loadall:t.loadall}})],1)},staticRenderFns:[]};var u=a("VU/8")(m,v,!1,function(t){a("QjI6")},"data-v-5a41e04a",null).exports,_={name:"proRepair",props:{prorepairpage:Number},components:{loadingtmp:o.a},data:function(){return{value:"",proRepairObj:[],pageSize:5,busy:!1,loadall:!1,projectId:this.$route.query.projectId}},created:function(){},methods:{loadrepair:function(t){var e=this;console.log(this.projectId);var a="?action=GetRelateCaseOfProject&PROJECT_ID="+this.projectId,i={PAGE_NUM:this.prorepairpage,PAGE_TOTAL:this.pageSize,KEYWORD:this.value};console.log(i),s.a.get(a,i).then(function(a){console.log(a.data);var i=a.data;i=i.map(function(t){return t.PROBLEM_DETAIL&&(t.PROBLEM_DETAIL=t.PROBLEM_DETAIL.replace(/\n/g,"<br/>")),t}),"0"===a.STATUSCODE?(e.proRepairObj=t?e.proRepairObj.concat(a.data):a.data,0==a.data.length||a.data.length<e.pageSize?(e.busy=!0,e.loadall=!0):e.busy=!1):e.busy=!1,e.$emit("emitbusy",{busy:!1,loadall:e.loadall})})},sear:function(){this.$emit("repairpagechange",1),this.proRepairObj=[],this.busy=!1,this.loadall=!1,this.loadrepair(0)}},mounted:function(){},watch:{prorepairpage:function(t,e){console.log(t+"||"+e),this.loadrepair(this.prorepairpage>1)}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"proRepairView"},[a("el-input",{attrs:{placeholder:"编号，厂商，型号，序列号，描述……"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.sear},slot:"append"})],1),t._v(" "),a("div",{staticClass:"content"},[t._l(t.proRepairObj,function(e){return a("div",{key:e.CASE_ID,staticClass:"eventCell"},[a("router-link",{attrs:{to:{name:"eventShow",query:{caseId:e.CASE_ID}}}},[a("div",{staticClass:"cellTop"},[a("el-row",[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"spheathcolor"}),t._v(t._s(e.CASE_NO)+"\n            ")]),t._v(" "),a("el-col",{attrs:{span:3}},["一级"==e.CASE_LEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor1"},[t._v(t._s(e.CASE_LEVEL))]):t._e(),t._v(" "),"二级"==e.CASE_LEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor2"},[t._v(t._s(e.CASE_LEVEL))]):t._e(),t._v(" "),"三级"==e.CASE_LEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor3"},[t._v(t._s(e.CASE_LEVEL))]):t._e(),t._v(" "),"四级"==e.CASE_LEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor4"},[t._v(t._s(e.CASE_LEVEL))]):t._e(),t._v(" "),"五级"==e.CASE_LEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor5"},[t._v(t._s(e.CASE_LEVEL))]):t._e()]),t._v(" "),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"cellTopTime"},[a("span",[t._v(t._s(e.CREATE_DATE))])])])],1)],1),t._v(" "),a("div",{staticClass:"cellContent"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("状态：")]),a("span",[t._v(t._s(e.CASE_STATUS))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("类型：")]),a("span",[t._v(t._s(e.CASE_TYPE))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("厂商：")]),a("span",[t._v(t._s(e.FACTORY))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("型号：")]),a("span",[t._v(t._s(e.DEVICE))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"tit"},[t._v("序列号：")]),a("span",[t._v(t._s(e.SN))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"tit"},[t._v("说明：")]),a("span",{domProps:{innerHTML:t._s(e.PROBLEM_DETAIL)}})])],1)],1)])],1)}),t._v(" "),a("loadingtmp",{attrs:{busy:t.busy,loadall:t.loadall}})],2)],1)},staticRenderFns:[]};var y=a("VU/8")(_,f,!1,function(t){a("yktH")},"data-v-4d4016f9",null).exports,g={name:"reportEcharts",props:["startMonth","endMonth"],components:{},data:function(){return{chartOneTit:"月度报修数量统计",chartTwoTit:"厂商报修数统计",chartThreeTit:"报障级别统计",chartFourTit:"设备型号报修数统计",chartFiveTit:"技术方向报修数统计",chartSixTit:"备件更换量统计",oneDataX:[],oneData:[],sixDataX:[],sixData:[],factoryData:[],factoryDataX:[],deviceTypeData:[],deviceModelXData:[],deviceModelYData:[],caseLevelData:[]}},mounted:function(){this.drawLine()},created:function(){this.reFetchAll()},methods:{onSubmit:function(){},crtTimeFtt:function(t){if(null!=t){var e=new Date(t),a=e.getMonth()+1;return a<10&&(a="0"+a),e.getFullYear()+"-"+a}},reFetchAll:function(){this.fetchAll(this.crtTimeFtt(this.startMonth),this.crtTimeFtt(this.endMonth))},fetchAll:function(t,e){var a=this,i=this.$route.query.projectId,n="?action=GetStatisticsCaseData&dimensionType=date&timeRangeType=month&projectId="+i+"&timeStart="+t+"&timeEnd="+e;s.a.get(n,{}).then(function(t){for(var e=t.DATA,i=[],n=[],s=0;s<e.length;s++)n[s]=e[s].DIMENSIONTYPE,i[s]=e[s].NUMS;a.oneData=i,a.oneDataX=n,a.drawLineOne()}),n="?action=GetStatisticsCaseData&dimensionType=factory&timeRangeType=month&projectId="+i+"&timeStart="+t+"&timeEnd="+e,s.a.get(n,{}).then(function(t){for(var e=t.DATA,i=[],n=[],s=0;s<e.length;s++)i[s]={},i[s].name=e[s].DIMENSIONTYPE,i[s].value=e[s].NUMS,n[s]=e[s].DIMENSIONTYPE;a.factoryData=i,a.factoryDataX=n,a.drawLineTwo()}),n="?action=GetStatisticsCaseData&dimensionType=deviceType&timeRangeType=month&projectId="+i+"&timeStart="+t+"&timeEnd="+e,s.a.get(n,{}).then(function(t){for(var e=t.DATA,i=[],n=0;n<e.length;n++)i[n]={},i[n].name=e[n].DIMENSIONTYPE,i[n].value=e[n].NUMS;a.deviceTypeData=i,a.drawLineFive()}),n="?action=GetStatisticsCaseData&dimensionType=deviceModel&timeRangeType=month&projectId="+i+"&timeStart="+t+"&timeEnd="+e,s.a.get(n,{}).then(function(t){for(var e=t.DATA,i=[],n=[],s=0;s<e.length;s++)i[s]=e[s].DIMENSIONTYPE,n[s]=e[s].NUMS;a.deviceModelXData=i,a.deviceModelYData=n,a.drawLineFour()}),n="?action=GetStatisticsCaseData&dimensionType=caseLevel&timeRangeType=month&projectId="+i+"&timeStart="+t+"&timeEnd="+e,s.a.get(n,{}).then(function(t){var e=t.DATA,i=[];if(void 0!==e){for(var n=0;n<e.length;n++)i[n]={},i[n].name=e[n].DIMENSIONTYPE,i[n].value=e[n].NUMS;a.caseLevelData=i,a.drawLineThree()}});n="?action=GetStatisticsCaseData&dimensionType=partUse&timeRangeType=month&projectId="+i+"&timeStart="+t+"&timeEnd="+e;s.a.get(n,{}).then(function(t){for(var e=t.DATA,i=[],n=[],s=0;s<e.length;s++)n[s]=e[s].DIMENSIONTYPE,i[s]=e[s].NUMS;a.sixData=i,a.sixDataX=n,a.drawLineSix()})},drawLineOne:function(){if(0!=this.oneData.length){console.log("1111111111111111111",this.oneData,this.oneData.length);var t=document.getElementById("myChartOne");t.style.width=window.innerWidth-30+"px",this.myChartOne=echarts.init(t),this.myChartOne.setOption({color:["#3398DB"],grid:{top:"5%",left:"0",right:"0",bottom:"2%",containLabel:!0},xAxis:[{type:"category",data:this.oneDataX,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",boundaryGap:[1,4]}],series:[{name:"直接访问",type:"bar",barWidth:"50%",data:this.oneData,label:{normal:{show:!0,position:"inside"}}}]})}else{var e=document.getElementById("myChartOne");e.innerText="当前时间段内无项目记录",e.style.cssText="width: '100%', height: '0.5rem'"}},drawLineTwo:function(){if(1==this.factoryData.length&&"其他"==this.factoryData[0].name&&null==this.factoryData[0].value){var t=document.getElementById("myChartTwo");t.innerText="当前时间段内无项目记录",t.style.cssText="width: '100%', height: '0.5rem'"}else if(0!=this.factoryData.length){console.log("222222222222222",this.factoryData,this.factoryData.length);var e=document.getElementById("myChartTwo");e.style.width=window.innerWidth-10+"px",e.style.height=window.innerWidth/2+50+"px",this.myChartTwo=echarts.init(e),this.myChartTwo.setOption({legend:{orient:"vertical",data:this.factoryDataX},series:[{name:"访问来源1",type:"pie",radius:"55%",center:["50%","60%"],data:this.factoryData,labelLine:{normal:{show:!0}},itemStyle:{normal:{label:{show:!0,formatter:"{b} : {c} \n ({d}%)"},labelLine:{show:!0}}}}]})}else{var a=document.getElementById("myChartTwo");a.innerText="当前时间段内无项目记录",a.style.cssText="width: '100%', height: '0.5rem'"}},drawLineFive:function(){if(1==this.deviceTypeData.length&&"其他"==this.deviceTypeData[0].name&&null==this.deviceTypeData[0].value){var t=document.getElementById("myChartFive");t.innerText="当前时间段内无项目记录",t.style.cssText="width: '100%', height: '0.5rem'"}else if(0!=this.deviceTypeData.length){console.log("3333333333333",this.deviceTypeData,this.deviceTypeData.length);var e=document.getElementById("myChartFive");e.style.width=window.innerWidth-30+"px",this.myChartFive=echarts.init(e),this.myChartFive.setOption({series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:this.deviceTypeData,labelLine:{normal:{show:!0}},itemStyle:{normal:{label:{show:!0,formatter:"{b} : {c} \n ({d}%)"},labelLine:{show:!0}}}}]})}else{var a=document.getElementById("myChartFive");a.innerText="当前时间段内无项目记录",a.style.cssText="width: '100%', height: '0.5rem'"}},drawLineFour:function(){if(1==this.deviceModelXData.length&&"其他"==this.deviceModelXData[0]){var t=document.getElementById("myChartFour");t.innerText="当前时间段内无项目记录",t.style.cssText="width: '100%', height: '0.5rem'"}else if(0!=this.deviceModelXData.length){var e=document.getElementById("myChartFour");console.log("444444444444444444",this.deviceModelXData[0],this.deviceModelXData.length),e.style.width=window.innerWidth-30+"px",this.myChartFour=echarts.init(e),this.myChartFour.setOption({grid:{top:"5%",left:"0",right:"4%",bottom:"2%",containLabel:!0},xAxis:{type:"value",boundaryGap:[1,4]},yAxis:{type:"category",data:this.deviceModelXData},series:[{name:"2011年",type:"bar",data:this.deviceModelYData,itemStyle:{normal:{label:{show:!0,formatter:"{c}"},labelLine:{show:!0}}}}]})}else{var a=document.getElementById("myChartFour");a.innerText="当前时间段内无项目记录",a.style.cssText="width: '100%', height: '0.5rem'"}},drawLineThree:function(){if(0!=this.caseLevelData.length){console.log("555555555555555555555",this.caseLevelData,this.caseLevelData.length);var t=document.getElementById("myChartThree");t.style.width=window.innerWidth-30+"px",this.myChartThree=echarts.init(t),this.myChartThree.setOption({series:[{name:"访问来源",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{emphasis:{show:!0,textStyle:{fontSize:"20",fontWeight:"bold"}}},labelLine:{normal:{show:!0}},data:this.caseLevelData,itemStyle:{normal:{label:{show:!0,formatter:"{b} : {c} \n ({d}%)"},labelLine:{show:!0},position:"top"}}}]})}else{var e=document.getElementById("myChartThree");e.innerText="当前时间段内无项目记录",e.style.cssText="width: '100%', height: '0.5rem'"}},drawLineSix:function(){if(0!=this.sixData.length){console.log("666666666666666666666",this.sixData,this.sixData.length);var t=document.getElementById("myChartSix");t.style.width=window.innerWidth-30+"px",this.myChartSix=echarts.init(t),this.myChartSix.setOption({color:["red"],grid:{top:"5%",left:"0",right:"0",bottom:"2%",containLabel:!0},xAxis:[{type:"category",data:this.sixDataX,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",boundaryGap:[1,4]}],series:[{name:"直接访问",type:"bar",barWidth:"50%",data:this.sixData,label:{normal:{show:!0,position:"inside"}}}]})}else{var e=document.getElementById("myChartSix");e.innerText="当前时间段内无项目记录",e.style.cssText="width: '100%', height: '0.5rem'"}},drawLine:function(){}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"echartsView"},[a("div",{staticClass:"chartOne"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartOneTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartOne"}})]),t._v(" "),a("div",{staticClass:"chartTwo"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartTwoTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartTwo"}})]),t._v(" "),a("div",{staticClass:"chartThree"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartThreeTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartThree"}})]),t._v(" "),a("div",{staticClass:"chartFour"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartFourTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartFour"}})]),t._v(" "),a("div",{staticClass:"chartFive"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartFiveTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartFive"}})]),t._v(" "),a("div",{staticClass:"chartSix"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartSixTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartSix"}})])])},staticRenderFns:[]};var b={name:"proReport",components:{charts:a("VU/8")(g,E,!1,function(t){a("DzNb")},"data-v-3ff990dc",null).exports},data:function(){var t=this;return{form:{startTime:new Date(this.getFormerTime(1)),endTime:new Date},pickerOptions:{disabledDate:function(e){return e.getTime()<t.value1||e.getTime()>Date.now()}}}},mounted:function(){},created:function(){},methods:{onSubmit:function(){this.$refs.charts.reFetchAll()},noKeyword:function(){document.activeElement.blur()},standardDate:function(t){for(var e=[],a=arguments.length,i=Array(a>1?a-1:0),n=1;n<a;n++)i[n-1]=arguments[n];return i.forEach(function(t){t.toString().length<2?e.push("0"+t):e.push(t)}),e.join("-")},getFormerTime:function(t){var e=(new Date).getFullYear()-1,a=[];a.unshift(this.standardDate("",e,(new Date).getMonth()+1,(new Date).getDate()));for(var i=1;i<t;i++)a.unshift(e-i+"1231");return a}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"proReportView"},[a("div",{staticClass:"proReportTop"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"请输入时间段","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},on:{focus:t.noKeyword},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),t._v(" "),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"请输入时间段","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},on:{focus:t.noKeyword},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1),t._v(" "),a("el-form-item",[a("el-button",{on:{click:t.onSubmit}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"proReportBtm"},[a("charts",{ref:"charts",attrs:{startMonth:t.form.startTime,endMonth:t.form.endTime}})],1)])},staticRenderFns:[]};var T=a("VU/8")(b,C,!1,function(t){a("J93w"),a("r6ps")},"data-v-65a493ee",null).exports,w={name:"proPlan",components:{},data:function(){return{tableData:[],table_arr:[{prop:"DOC_NAME",label:"文档名称",fixed:!0,width:"100%"},{prop:"UPLOADER",label:"上传人",fixed:!0,width:"45px"},{prop:"CREATE_ON",label:"上传时间",fixed:!0,width:"55px"}]}},beforeCreate:function(){},created:function(){var t=this,e="?action=GetProjectDoc&PROJECT_ID="+this.$route.query.projectId;s.a.get(e,{}).then(function(e){var a=e.data;a.map(function(t){t.href=i.a.Server+"/api/download?fileId="+t.FILE_ID+"&fileName="+t.DOC_NAME;var e=t.DOC_NAME.split(".");t.fileext=e[e.length-1],t.docname=t.DOC_NAME}),t.tableData=a,console.log(t.tableData)})},methods:{downFile:function(t,e,a){var i=navigator.userAgent.toLowerCase();if(console.log(t),console.log(e),/(iPhone|iPad|iPod|iOS)/i.test(i)){var n={action:"downFile",downloadurl:encodeURI(t)};window.webkit.messageHandlers.ioshandle.postMessage({body:n})}else if(/(Android)/i.test(i)){var s="{action:'downFile',downloadurl:'"+t+"',fileExt:'"+e+"',docname:'"+encodeURI(a)+"'}";android.getClient(s)}}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"proPlanView"},[a("div",{staticClass:"proPlanCell"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[t._l(t.table_arr,function(e){return[a("el-table-column",{key:e.id,attrs:{fixed:e.fixed,prop:e.prop,label:e.label,"min-width":e.width},scopedSlots:t._u([{key:"default",fn:function(i){return["DOC_NAME"==e.prop?[a("a",{attrs:{download:i.row.DOC_NAME},on:{click:function(e){t.downFile(i.row.href,i.row.fileext,i.row.docname)}}},[t._v(" "+t._s(i.row.DOC_NAME))])]:a("span",{staticClass:"table_name"},[t._v(t._s(i.row[e.prop]))])]}}])})]})],2)],1)])},staticRenderFns:[]};var S=a("VU/8")(w,D,!1,function(t){a("HK+s")},"data-v-29e69150",null).exports,A={name:"proPlan",components:{},data:function(){return{tableData:[],table_arr:[{prop:"EVALUATE_FROM_NAME",label:"评价人",fixed:!0,width:"30%"},{prop:"EVALUATE_TIME",label:"评价时间",fixed:!0,width:"40%"},{prop:"TOTAL_SCORE",label:"得分",fixed:!0,width:"30%"}]}},created:function(){var t=this;s.a.get("?action=GetProjectEvaluate&PROJECT_ID="+this.$route.query.projectId,{}).then(function(e){t.tableData=e.data})},methods:{}},I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"proPlanView"},[e("div",{staticClass:"proPlanCell"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,stripe:""}},[this._l(this.table_arr,function(t){return[e("el-table-column",{key:t.id,attrs:{fixed:t.fixed,prop:t.prop,label:t.label,"min-width":t.width}})]})],2)],1)])},staticRenderFns:[]};var M=a("VU/8")(A,I,!1,function(t){a("wxct")},"data-v-6cf2e27d",null).exports,L={name:"proPlan",components:{},data:function(){return{tableData:[],table_arr:[{prop:"COMPLAINT_COMMENT",label:"意见内容",fixed:!0,width:"60%"},{prop:"TASK_STATUS",label:"状态",fixed:!0,width:"20%"},{prop:"CREATE_ON",label:"创建时间",fixed:!0,width:"20%"}]}},created:function(){var t=this;s.a.get("?action=GetComplaintsList&PROJECT_ID="+this.$route.query.projectId,{}).then(function(e){t.tableData=e.data})},methods:{}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"proPlanView"},[e("div",{staticClass:"proPlanCell"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,stripe:""}},[this._l(this.table_arr,function(t){return[e("el-table-column",{key:t.id,attrs:{fixed:t.fixed,prop:t.prop,label:t.label,"min-width":t.width}})]})],2)],1)])},staticRenderFns:[]};var N=a("VU/8")(L,O,!1,function(t){a("npi6")},"data-v-1b3462e2",null).exports,x={name:"programShow",components:{headerLast:n.a,proHealth:c,proMachine:h,proPlan:u,proRepair:y,proReport:T,proFileDown:S,proSatisfy:M,proFeedback:N},data:function(){return{programShowTit:"项目详情",programListArr:[{}],projectInfo:{},activeName:"prorepair",page:1,pageSize:10,busy:!1,loadall:!1,type:this.$route.query.type,needpage:{promachine:{page:0,loadall:!1,onchange:!1,searchData:{}},prorepair:{page:0,loadall:!1,onchange:!1,searchData:{}}}}},created:function(){},mounted:function(){this.getProgramInfo(),window.addEventListener("scroll",this.handleScroll,!0)},methods:{chtab:function(){this.needpage[this.activeName]&&0==this.needpage[this.activeName].page&&(this.needpage[this.activeName].page=1)},getEmitPage:function(t){this.busy=t.busy,this.needpage[this.activeName].loadall=t.loadall},getEmitparams:function(t){this.needpage[this.activeName].page=0,this.needpage[this.activeName].loadall=!1},getProgramInfo:function(){var t=this;s.a.get("?action=GetProjectInfo&EMPID="+i.a.empId+"&PROJECT_ID="+this.$route.query.projectId,{}).then(function(e){var a=e.data;console.log("res:",e),t.projectInfo=a})},loadMore:function(){var t=this;console.log(this.busy),this.needpage[this.activeName]&&!this.needpage[this.activeName].loadall&&(this.busy=!0,setTimeout(function(){t.needpage[t.activeName].page++},1e3))},handleScroll:function(){var t=document.querySelector(".programShowView").scrollTop,e=document.querySelector(".el-tabs__header"),a=document.querySelector(".programTable").offsetTop-45;t>=a?(e.classList.add("moveTop"),e.style.top=Number(t)/100-a/100+"rem"):(e.classList.remove("moveTop"),e.style.top="0rem")},repairPageChange:function(t){this.needpage.prorepair={page:t,loadall:!1}},roleProjectList:function(t,e){1==t?this.$router.push({name:"workBenchInfoSaleManagement",query:{ROLE_NAME:e.SALESMAN_NAME,SEARCH_EMP_ID:e.SALESMAN_ID,TYPE:t}}):2==t&&this.$router.push({name:"workBenchInfoSaleManagement",query:{ROLE_NAME:e.PM_NAME,SEARCH_EMP_ID:e.PM_ID,TYPE:t}})}},destroyed:function(){window.removeEventListener("scroll",this.handleScroll,!0)},beforeRouteLeave:function(t,e,a){"programList"!=t.name&&"home"!=t.name||(t.meta.isUseCache=!0),a()}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"programShowView",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[a("header-last",{attrs:{title:t.programShowTit}}),t._v(" "),a("div",{staticStyle:{height:"0.45rem"}}),t._v(" "),a("div",{staticClass:"content"},[t._l(t.programListArr,function(e){return a("div",{key:e.PROJECT_CODE,staticClass:"programCell"},[a("div",{staticClass:"cellTop"},[a("el-row",[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"cellTopNum"},[t._v(t._s(t.projectInfo.PROJECT_CODE))])]),t._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"cellTopColor"},[0==t.projectInfo.BASE_COLOR?a("span"):t._e(),t._v(" "),1==t.projectInfo.BASE_COLOR?a("span",{staticStyle:{background:"#ff0000"}}):t._e(),t._v(" "),2==t.projectInfo.BASE_COLOR?a("span",{staticStyle:{background:"#ff9900"}}):t._e(),t._v(" "),3==t.projectInfo.BASE_COLOR?a("span",{staticStyle:{background:"#ffff00"}}):t._e(),t._v(" "),4==t.projectInfo.BASE_COLOR?a("span",{staticStyle:{background:"#009900"}}):t._e(),t._v(t._s(t.projectInfo.HEALTH_BASE_VALUE)+"\n                "),0==t.projectInfo.NOW_COLOR?a("span"):t._e(),t._v(" "),1==t.projectInfo.NOW_COLOR?a("span",{staticStyle:{background:"#ff0000"}}):t._e(),t._v(" "),2==t.projectInfo.NOW_COLOR?a("span",{staticStyle:{background:"#ff9900"}}):t._e(),t._v(" "),3==t.projectInfo.NOW_COLOR?a("span",{staticStyle:{background:"#ffff00"}}):t._e(),t._v(" "),4==t.projectInfo.NOW_COLOR?a("span",{staticStyle:{background:"#009900"}}):t._e(),t._v(t._s(t.projectInfo.HEALTH_CURRENT_VALUE)+"\n\n                                \n            ")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"cellTopState"},[t._v("状态："),a("span",[t._v(t._s(t.projectInfo.PROJECT_STATUS))])])])],1)],1),t._v(" "),a("div",{staticClass:"cellContent"},[a("p",[t._v(t._s(t.projectInfo.PROJECT_NAME))]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("业务类型："+t._s(t.projectInfo.BUSINESS_TYPE))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("开始时间："+t._s(t.projectInfo.START_DATE))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("业务小类："+t._s(t.projectInfo.BUSINESS_CLASS))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("结束时间："+t._s(t.projectInfo.END_DATE))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("项目级别："+t._s(t.projectInfo.PROJECT_LEVEL))])]),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"home_page"==t.type,expression:"type=='home_page'"}],attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("销售姓名："+t._s(t.projectInfo.SALESMAN_NAME))])]),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"manager_module"==t.type,expression:"type=='manager_module'"}],attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("销售姓名："),a("el-button",{staticStyle:{margin:"0",padding:"0"},attrs:{type:"text"},nativeOn:{click:function(e){t.roleProjectList(1,t.projectInfo)}}},[t._v(t._s(t.projectInfo.SALESMAN_NAME))])],1)])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("交付类型："+t._s(t.projectInfo.DELIVERY_TYPE_NAME))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("销售电话：\n            "),a("a",{staticStyle:{color:"#2698d6"},attrs:{href:"tel:"+t.projectInfo.SALESMAN_MOBILE},on:{click:function(e){t.sendCall(t.projectInfo.SALESMAN_MOBILE)}}},[t._v(t._s(t.projectInfo.SALESMAN_MOBILE)+"\n            ")])])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("签约类型："+t._s(t.projectInfo.CONTRACT_WAY))])]),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"home_page"==t.type,expression:"type=='home_page'"}],attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("PM姓名："+t._s(t.projectInfo.PM_NAME))])]),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"manager_module"==t.type,expression:"type=='manager_module'"}],attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("PM姓名："),a("el-button",{staticStyle:{margin:"0",padding:"0"},attrs:{type:"text"},nativeOn:{click:function(e){t.roleProjectList(2,t.projectInfo)}}},[t._v(t._s(t.projectInfo.PM_NAME))])],1)])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("客户名称："+t._s(t.projectInfo.CUSTOMER_NAME))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("PM电话：\n              "),a("a",{staticStyle:{color:"#2698d6"},attrs:{href:"tel:"+t.projectInfo.PM_MOBILE},on:{click:function(e){t.sendCall(t.projectInfo.PM_MOBILE)}}},[t._v(t._s(t.projectInfo.PM_MOBILE)+"\n              ")])])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"tit"},[t._v("责任交付部门："+t._s(t.projectInfo.AREA_NAME))])])],1)],1)])}),t._v(" "),a("div",{staticClass:"programTable"},[a("el-tabs",{on:{"tab-click":t.chtab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"相关报修",name:"prorepair"}},[a("pro-repair",{attrs:{onchange:t.needpage.promachine.onchange,prorepairpage:t.needpage.prorepair.page,lazy:""},on:{emitbusy:t.getEmitPage,repairpagechange:t.repairPageChange}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"健康度",name:"prohealth"}},[a("pro-health")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"巡检计划",name:"proplan",lazy:""}},[a("pro-plan")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"分析报表",name:"proreport",lazy:""}},[a("pro-report")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"设备清单",name:"promachine",lazy:""}},[a("pro-machine",{attrs:{promachinepage:t.needpage.promachine.page,onchange:t.needpage.promachine.onchange},on:{emitbusy:t.getEmitPage,emitparams:t.getEmitparams}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"文档下载",name:"profiledown",lazy:""}},[a("pro-file-down")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"满意度",name:"prosatisfy",lazy:""}},[a("pro-satisfy")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"意见反馈",name:"profeedback",lazy:""}},[a("pro-feedback")],1)],1)],1)],2)],1)},staticRenderFns:[]};var R=a("VU/8")(x,P,!1,function(t){a("9aql"),a("dOq+")},"data-v-4ebf8031",null);e.default=R.exports},"HK+s":function(t,e){},J93w:function(t,e){},QjI6:function(t,e){},"dOq+":function(t,e){},npi6:function(t,e){},r6ps:function(t,e){},ud8f:function(t,e){},wOld:function(t,e){},wxct:function(t,e){},yktH:function(t,e){}});