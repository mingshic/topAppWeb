webpackJsonp([41],{algA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("eMYz"),o=(a("YF26"),a("Z1y9")),i={name:"workBenchEventInfoShow",components:{headerLast:r.a},data:function(){var t=this;return{workBenchEventInfoTit:"事件信息",backUrl:"workBenchEventInfo",queryParams:"",form:{date1:new Date(this.getFormerTime(1)),date2:new Date},tableData:[],workBenchEventInfoObj:[{prop:"CUST_NAME",label:"客户",width:""},{prop:"FAULT_NUM",label:"故障类",width:""},{prop:"NON_FAULT_NUM",label:"非故障类",width:""},{prop:"total",label:"总计",width:""}],pickerOptions:{disabledDate:function(e){return e.getTime()<t.value1||e.getTime()>Date.now()}},industryName:this.$route.query.INDUSTRY_NAME,caseLevel:this.$route.query.CASE_LEVEL,techName:this.$route.query.TECH_NAME,factoryName:this.$route.query.FACTORY_NAME}},created:function(){void 0!=this.$route.query.date1&&(this.form.date1=this.$route.query.date1,this.form.date2=this.$route.query.date2),this.backUrl="workBenchEventInfo",this.queryParams={date1:this.form.date1,date2:this.form.date2},this.returnList()},methods:{returnList:function(){var t=this;console.log({INDUSTRY_NAME:this.industryName,CASE_LEVEL:this.caseLevel,TECH_NAME:this.techName,FACTORY_NAME:this.factoryName,START_TIME:this.form.date1,END_TIME:this.form.date2}),o.a.get("?action=GetCaseStatList",{INDUSTRY_NAME:this.industryName,CASE_LEVEL:this.caseLevel,TECH_NAME:this.techName,FACTORY_NAME:this.factoryName,START_TIME:this.form.date1,END_TIME:this.form.date2}).then(function(e){t.tableData=e.data,console.log(e.data);for(var a=t,r=0;r<t.tableData.length;r++){var o=t.tableData[r].FAULT_NUM+t.tableData[r].NON_FAULT_NUM;a.tableData[r]={CUST_NAME:a.tableData[r].CUST_NAME,CUSTOMER_ID:a.tableData[r].CUSTOMER_ID,FAULT_NUM:a.tableData[r].FAULT_NUM,NON_FAULT_NUM:a.tableData[r].NON_FAULT_NUM,total:o}}})},getSummaries:function(t){var e=t.columns,a=t.data,r=[];return e.forEach(function(t,e){if(0!==e){var o=a.map(function(e){return Number(e[t.property])});o.every(function(t){return isNaN(t)})?r[e]="N/A":r[e]=o.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0)}else r[e]="合计"}),r},searchInfo:function(){this.returnList()},standardDate:function(t){for(var e=[],a=arguments.length,r=Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return r.forEach(function(t){t.toString().length<2?e.push("0"+t):e.push(t)}),e.join("-")},getFormerTime:function(t){var e=(new Date).getFullYear()-1,a=[];a.unshift(this.standardDate("",e,(new Date).getMonth()+1,(new Date).getDate()));for(var r=1;r<t;r++)a.unshift(e-r+"1231");return a},noKeyword:function(){document.activeElement.blur()},tdClick:function(t,e,a,r){var o="3,5";"故障类"==e.label&&(o="1,2,4"),console.log(t),console.log("zzzzzzzzzzzzzzzz",{factoryName:this.factoryName,techName:this.techName,caseLevel:this.caseLevel,industryName:this.industryName,CUST_NAME:t.CUST_NAME,custid:t.CUSTOMER_ID,isSearch:1,type:o,industry:this.$route.query.industry,startDate:this.form.date1,endDate:this.form.date2}),this.$router.push({name:"workBenchMyEventAll",query:{factoryName:this.factoryName,techName:this.techName,caseLevel:this.caseLevel,industryName:this.industryName,CUST_NAME:t.CUST_NAME,custid:t.CUSTOMER_ID,isSearch:1,type:o,industry:this.$route.query.industry,startDate:this.form.date1,endDate:this.form.date2}})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workBenchEventInfoView"},[a("header-last",{attrs:{title:t.workBenchEventInfoTit,backUrl:t.backUrl,date1:t.form.date1,date2:t.form.date2}}),t._v(" "),a("div",{staticStyle:{height:"0.45rem"}}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"searchView"},[a("el-form",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"date1"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{type:"date",placeholder:"请选择日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},on:{focus:t.noKeyword},model:{value:t.form.date1,callback:function(e){t.$set(t.form,"date1",e)},expression:"form.date1"}})],1)],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("~")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"date2"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{type:"date",placeholder:"请选择日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},on:{focus:t.noKeyword},model:{value:t.form.date2,callback:function(e){t.$set(t.form,"date2",e)},expression:"form.date2"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{on:{click:t.searchInfo}},[t._v("搜索")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"tableView"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"summary-method":t.getSummaries,"max-height":"440","show-summary":""},on:{"cell-click":t.tdClick}},[t._l(t.workBenchEventInfoObj,function(t){return[a("el-table-column",{key:t.id,attrs:{prop:t.prop,label:t.label,"min-width":t.width}})]})],2)],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("dCys")},"data-v-f2321f76",null);e.default=n.exports},dCys:function(t,e){}});