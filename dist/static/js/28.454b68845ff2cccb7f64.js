webpackJsonp([28],{"5pg1":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("YF26"),s=o("eMYz"),i=o("Z1y9"),a={name:"eventReplenish",components:{headerLast:s.a},data:function(){return{eventReplenishTit:"补充说明",eventReplenishData:[{type:"项目编号：",desc:"51478"},{type:"项目名称：",desc:"TOP系统测试项目-华东"},{type:"事件编号：",desc:"107961"}],form:{desc:""},caseid:this.$route.query.caseId,upaction:"http://139.129.207.35:8084/api/upload",uploadres:o("a8Y1")}},beforeCreate:function(){},mounted:function(){console.log(444),console.log(this.$loading,222);console.log(this),window.afun=function(){console.log(111)},window.photoResult=this.getPhotoUrl},methods:{presup:function(){i.a.post("?action=upload",{FILETYPE:"jpg"}).then(function(e){console.log("上传")})},uptest:function(){console.log("上传测试"),i.a.post("?action=upload",{FILETYPE:"jpg"}).then(function(e){console.log("上传")})},onSubmit:function(){var e=this,t=this.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.3)"}),o=this;i.a.get("?action=GetComplaintsList&EMPID="+n.a.empId+"&PAGE_NUM=1&PAGE_TOTAL=3",{}).then(function(t){console.log("============"),console.log(t.data),e.opinionTab[0].data=t.data}),i.a.get("?action=UpdateProcessInfo&CASE_ID="+this.caseid+"&REMARK="+this.form.desc,"").then(function(n){if("0"==n.STATUSCODE){e.$message({message:"提交成功",type:"success",center:!0,customClass:"msgdefine"});var s=o.caseid;console.log(o.$route.query.workId+"---"+o.$route.query.type+"==="+o.caseid);var i=o.$route.query.workId;console.log(o.$route.query.type),"process"==o.$route.query.type?(console.log(o.$route.query.workId),setTimeout(function(){o.$router.push({name:"workBenchTaskDetailInfo",query:{workId:i}})},1e3)):setTimeout(function(){o.$router.push({name:"eventShow",query:{caseId:s}})},1e3)}else e.$message({message:n.MESSAGE,type:"error",center:!0,customClass:"msgdefine"});t.close()}).catch(function(e){this.$message({message:e.MESSAGE,type:"error",center:!0,customClass:"msgdefine"})})},takePhoto:function(){var e=navigator.userAgent.toLowerCase();if(console.log(e),/(iPhone|iPad|iPod|iOS)/i.test(e)){window.webkit.messageHandlers.ioshandle.postMessage({body:{action:"takePhoto"}})}else if(/(Android)/i.test(e)&&/mobile/i.test(e)){android.getClient("{action:takePhoto}")}},getPhotoUrl:function(e){var t=this,o=this.$loading({lock:!0,text:"上传中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.3)"}),n=new FormData;n.append("FILETYPE","jpg"),n.append("FILE","data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="),n.append("FILE",e),i.a.post("?action=upload",n).then(function(n){console.log(n),"0"==n.STATUSCODE?(t.form.docId=n.data.docId,t.$refs.showpic.src=e):t.$toast(n.MESSAGE),o.close()})}},created:function(){var e=this;i.a.get("?action=GetCaseInfo&CASE_ID="+this.caseid,{}).then(function(t){var o=t.data;e.eventReplenishData[0].desc=o.PROJECT_NO,e.eventReplenishData[1].desc=o.PROJECT_NAME,e.eventReplenishData[2].desc=o.CASE_NO})},beforeDestroy:function(){window.photoResult=null}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"eventReplenishView"},[o("header-last",{attrs:{title:e.eventReplenishTit}}),e._v(" "),o("div",{staticStyle:{height:"0.45rem"}}),e._v(" "),o("div",{staticClass:"content"},[o("ul",e._l(e.eventReplenishData,function(t){return o("li",{key:t.id},[o("span",[e._v(e._s(t.type))]),e._v(e._s(t.desc))])})),e._v(" "),o("el-form",{ref:"form",attrs:{model:e.form}},[o("el-form-item",{staticClass:"text"},[o("el-input",{attrs:{type:"textarea",placeholder:"补充说明"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.docId,expression:"form.docId"}],attrs:{type:"hidden"},domProps:{value:e.form.docId},on:{input:function(t){t.target.composing||e.$set(e.form,"docId",t.target.value)}}}),e._v(" "),o("el-form-item",{staticClass:"takephbox",staticStyle:{"padding-left":"10px"}},[o("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"success"},on:{click:e.takePhoto}},[e._v("上传照片")]),e._v(" "),o("div",{staticClass:"imgout"},[o("img",{ref:"showpic",attrs:{id:"showpic",src:e.uploadres}})])],1),e._v(" "),o("el-form-item",{staticClass:"submitBtn"},[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var l=o("VU/8")(a,c,!1,function(e){o("OuaN")},"data-v-d472a886",null);t.default=l.exports},OuaN:function(e,t){},a8Y1:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA1CAYAAAD/L5PDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFvmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjRUMjE6NDQ6MzUrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDYtMjRUMjE6NDQ6MzUrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA2LTI0VDIxOjQ0OjM1KzA4OjAwIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA0NmRlZTU5LWFk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"}});