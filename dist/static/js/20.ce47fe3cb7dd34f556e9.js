webpackJsonp([20],{Ifpu:function(e,t,a){"use strict";var s=a("Z1y9"),o={name:"searchPartsOwnList",components:{},props:["queryData"],data:function(){return{form:{factoryName:"",modelName:"",partsTypeName:""},partsTypeNameArr:[]}},watch:{},created:function(){var e=this;console.log("focus serach view"),console.log(this.queryData),s.a.get("?action=/parts/GetPartsTypeList","").then(function(t){console.log(t),e.partsTypeNameArr=t.DATA,console.log(e.partsTypeNameArr)}),this.form.factoryName=this.queryData.factoryName,this.form.modelName=this.queryData.modelName,this.form.partsTypeName=this.queryData.partsTypeName},methods:{onCancel:function(){this.$emit("change",{popBg:!1})},onSearch:function(){var e=this.form;this.$emit("search",e);this.$emit("change",{popBg:!1})},noKeyword:function(){document.activeElement.blur()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchPartsOwnListView"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"厂商"}},[a("el-input",{staticClass:"bInput",model:{value:e.form.factoryName,callback:function(t){e.$set(e.form,"factoryName",t)},expression:"form.factoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备型号"}},[a("el-input",{staticClass:"bInput",model:{value:e.form.modelName,callback:function(t){e.$set(e.form,"modelName",t)},expression:"form.modelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型"}},[a("el-select",{attrs:{placeholder:"设备类型",multiple:"","collapse-tags":""},model:{value:e.form.partsTypeName,callback:function(t){e.$set(e.form,"partsTypeName",t)},expression:"form.partsTypeName"}},e._l(e.partsTypeNameArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.partsTypeName,value:e.partsTypeName}})}))],1),e._v(" "),a("el-form-item",{staticClass:"searchBtn"},[a("el-button",{on:{click:e.onCancel}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"searchBtnCell",on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1)},staticRenderFns:[]};var n={name:"headerBasePartsOwn",components:{searchPartsOwnList:a("VU/8")(o,r,!1,function(e){a("SCna")},"data-v-23751091",null).exports},data:function(){return{headerRight:"查询",popBg:!1}},props:["title","queryData"],watch:{},created:function(){},methods:{updatePopBg:function(e){console.log(e+"=========="),console.log(e.popBg),this.popBg=e.popBg},searchData:function(e){this.$emit("searchPro",e)},back:function(e){this.$router.back(-1)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"headerView"},[a("header",[a("div",{staticClass:"headerLeft",on:{click:e.back}},[a("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),a("h2",[e._v(e._s(e.title))]),e._v(" "),a("div",{staticClass:"headerRight",on:{click:function(t){t.stopPropagation(),e.popBg=!e.popBg}}},[e._v(e._s(e.headerRight))])]),e._v(" "),e.popBg?[a("div",{staticClass:"popBg"},[a("search-parts-own-list",{attrs:{queryData:e.queryData},on:{change:e.updatePopBg,search:e.searchData}})],1)]:e._e()],2)},staticRenderFns:[]};var l=a("VU/8")(n,i,!1,function(e){a("Mo7I")},"data-v-4f28049c",null);t.a=l.exports},Mo7I:function(e,t){},SCna:function(e,t){},jmxN:function(e,t){},m7bi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Ifpu"),o=a("Z1y9"),r={name:"workBenchPartsOwnListView",components:{headerBasePartsOwn:s.a},data:function(){return{workBenchPartsOwnListTit:"备件信息-自有",tableData:[],workBenchPartsOwnListObj:[{prop:"INSTOCK_MAIN_CODE",label:"入库单号",width:"20%"},{prop:"FACTORY_NM",label:"厂商",width:"20%"},{prop:"MODEL_NAME",label:"设备型号",width:"20%"},{prop:"PARTS_TYPE_NAME",label:"备件类型",width:"20%"},{prop:"PART_AMOUNT",label:"金额",width:"20%"}],page:1,pageSize:30,busy:!0,loadall:!1,tableHeight:400,isSearch:!1,searchData:{}}},created:function(){this.getPartsOwnList()},mounted:function(){var e=this;this.$nextTick(function(){var t=e;console.log("ssssssss",e.type),e.tableHeight=document.documentElement.clientHeight-45,window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-45}})},methods:{getPartsOwnList:function(){var e=this,t={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize,TYPE:"1",PARENT_AREA_NAME:this.$route.query.provinceName};console.log(t),this.isSearch&&(t.FACTORY_NAME=this.searchData.factoryName,t.MODEL_NAME=this.searchData.modelName,t.PARTS_TYPE_NAME=this.searchData.partsTypeName.join(",")),console.log(t);var a=this.page>1;o.a.get("?action=/parts/GetSelfPartsList",t).then(function(t){console.log("222222",t),e.tableData=a?e.tableData.concat(t.data):t.data,0==t.data.length||t.data.length<e.pageSize?(e.busy=!0,e.loadall=!0,e.$message({message:"已加载全部数据",type:"success",center:!0,duration:1e3,customClass:"msgdefine"})):(e.busy=!1,e.page++)})},rowClick:function(e){console.log("row",e),this.$router.push({name:"workBenchOwnPartsDetail",query:{singlePartId:e.SINGLEPART_ID}})},loadMore:function(){var e=this;if(this.busy)return!1;this.busy=!0,setTimeout(function(){e.getPartsOwnList()},1e3)},searchList:function(e){console.log("formData",e),this.searchData=e,this.tableData=[],this.busy=!1,this.isSearch=!0,this.page=1,this.loadall=!1,this.loadMore()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"workBenchPartsOwnListView"},[a("header-base-parts-own",{attrs:{title:e.workBenchPartsOwnListTit,queryData:e.searchData},on:{searchPro:e.searchList}}),e._v(" "),a("div",{staticStyle:{height:"0.45rem"}}),e._v(" "),a("div",{staticClass:"workBenchPartsOwnListContent"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.busy&&!e.loadall,expression:"busy && !loadall"},{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{stripe:"","element-loading-text":"加载中",data:e.tableData,height:e.tableHeight},on:{"row-click":e.rowClick}},[e._l(e.workBenchPartsOwnListObj,function(e){return[a("el-table-column",{key:e.id,attrs:{prop:e.prop,label:e.label,"min-width":e.width}})]})],2)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(r,n,!1,function(e){a("jmxN")},"data-v-7e48a256",null);t.default=i.exports}});