webpackJsonp([55],{"11Cp":function(e,t){},jWSI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s),o=a("eMYz"),l=a("Z1y9"),i={name:"addParts",components:{headerLast:o.a},data:function(){return{declareTitle:"新增备件",form:{partsSource:"2",pnFru:"",SN:"",ifPackage:"",ifTakeaway:"",useStatus:"3",isRecycle:"",useStatusRemark:"",partsType:"",caseId:this.$route.query.caseId},rules:{ifPackage:[{required:!0,message:"请先选择是否包装",trigger:"change"}],ifTakeaway:[{required:!0,message:"请先选择是否已带走",trigger:"change"}],useStatus:[{required:!0,message:"请先选择使用情况",trigger:"change"}],isRecycle:[{required:!0,message:"请先选择能否回收",trigger:"change"}]},partsTypeList:[],useStatus:"",useStatusList:[{useStatusName:"已使用件",useStatusId:"1"},{useStatusName:"未使用件",useStatusId:"2"},{useStatusName:"坏件",useStatusId:"3"},{useStatusName:"DOA不可用",useStatusId:"4"},{useStatusName:"未到场",useStatusId:"5"}]}},created:function(){var e=this;l.a.get("?action=/parts/GetPartsTypeList",{}).then(function(t){e.partsTypeList=t.DATA,console.log(e.partsTypeList)})},methods:{showMsg:function(e){this.$notify({title:"警示信息",dangerouslyUseHTMLString:!0,message:"<strong>"+e+"</strong>"})},DATAParams:function(){var e={};return e.PARTS_SOURCE=this.form.partsSource,e.PN_FRU=this.form.pnFru,e.SN=this.form.SN,e.TYPE=this.form.partsType,e.USE_STATUS=this.form.useStatus,e.USE_STATUS_REMARK=this.form.useStatusRemark,e.IF_PACKAGE=this.form.ifPackage,e.IF_TAKEAWAY=this.form.ifTakeaway,e.IS_RECYCLE=this.form.isRecycle,e.CASE_ID=this.$route.query.caseId,e},onSubmit:function(e){var t=this,a=new URLSearchParams,s=new Array;s.push(this.DATAParams()),s=r()(s),a.append("DATA",s),a.append("UPDATE_DATE",this.getCurrentTime()),a.append("CASE_ID",this.caseId);var o=this.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.3)"});this.$refs[e].validate(function(e){if(!e)return o.close(),t.$message({message:"请正确填写",type:"error",center:!0,customClass:"msgdefine"}),!1;l.a.post("?action=/parts/updatePartsGathering",a).then(function(e){if(console.log("params",a),console.log(e),o.close(),"0"==e.STATUSCODE){t.$message({message:"提交成功",type:"success",center:!0,customClass:"msgdefine"}),t.$router.go(0);t.$emit("change",{popBg:!1})}else{t.$message({message:e.MESSAGE+"发生错误",type:"error",center:!0,customClass:"msgdefine"});t.$emit("change",{popBg:!1})}})})},onCancel:function(){this.$emit("change",{popBg:!1})},noKeyword:function(){document.activeElement.blur()},getCurrentTime:function(){var e=(new Date).getMonth()+1;return(new Date).getFullYear()+"-"+e+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addPartsView"},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"1rem"}},[a("el-form-item",{attrs:{label:"备件来源"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.form.partsSource,callback:function(t){e.$set(e.form,"partsSource",t)},expression:"form.partsSource"}},[a("el-radio",{attrs:{label:"2"}},[e._v("换下件")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"PN/FRU"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入PN/FRU"},model:{value:e.form.pnFru,callback:function(t){e.$set(e.form,"pnFru",t)},expression:"form.pnFru"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"序列号"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入序列号"},model:{value:e.form.SN,callback:function(t){e.$set(e.form,"SN",t)},expression:"form.SN"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备件类型"}},[a("el-select",{attrs:{placeholder:"请选择备件类型",clearable:""},model:{value:e.form.partsType,callback:function(t){e.$set(e.form,"partsType",t)},expression:"form.partsType"}},e._l(e.partsTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.partsTypeName,value:e.partsTypeId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否有包装",prop:"ifPackage"}},[a("el-radio-group",{model:{value:e.form.ifPackage,callback:function(t){e.$set(e.form,"ifPackage",t)},expression:"form.ifPackage"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否已带走",prop:"ifTakeaway"}},[a("el-radio-group",{model:{value:e.form.ifTakeaway,callback:function(t){e.$set(e.form,"ifTakeaway",t)},expression:"form.ifTakeaway"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用情况",prop:"useStatus"}},[a("el-select",{attrs:{placeholder:"选择使用情况",clearable:""},model:{value:e.form.useStatus,callback:function(t){e.$set(e.form,"useStatus",t)},expression:"form.useStatus"}},e._l(e.useStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.useStatusName,value:e.useStatusId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"能否回收",prop:"isRecycle"}},[a("el-radio-group",{model:{value:e.form.isRecycle,callback:function(t){e.$set(e.form,"isRecycle",t)},expression:"form.isRecycle"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"回收件说明"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入回收件说明"},model:{value:e.form.useStatusRemark,callback:function(t){e.$set(e.form,"useStatusRemark",t)},expression:"form.useStatusRemark"}})],1),e._v(" "),a("el-form-item",{staticClass:"submitCell"},[a("el-button",{on:{click:e.onCancel}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"submitBtn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(i,n,!1,function(e){a("11Cp")},"data-v-633d1221",null);t.default=u.exports}});