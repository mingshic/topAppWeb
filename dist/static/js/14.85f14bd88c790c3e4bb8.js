webpackJsonp([14,55],{"11Cp":function(e,t){},L9eS:function(e,t){},QFtm:function(e,t,a){"use strict";var s={name:"headerBaseEight",components:{addParts:a("jWSI").default},data:function(){return{popBg:!1}},props:["title"],watch:{},created:function(){},methods:{updatePopBg:function(e){this.popBg=e.popBg},searchData:function(e){this.$emit("searchPro",e),console.log("11111111111111112222",e)},onAddParts:function(){this.$router.push({name:"addParts",query:{caseId:this.$route.query.caseId}})},back:function(e){this.$router.back(-1)}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"headerView"},[a("header",[a("div",{staticClass:"headerLeft",on:{click:e.back}},[a("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),a("h2",[e._v(e._s(e.title))]),e._v(" "),a("div",{staticClass:"el-icon-plus",on:{click:function(t){t.stopPropagation(),e.popBg=!e.popBg}}})]),e._v(" "),e.popBg?a("div",{staticClass:"popBg"},[a("add-parts",{on:{change:e.updatePopBg,search:e.searchData}})],1):e._e()])},staticRenderFns:[]};var o=a("VU/8")(s,r,!1,function(e){a("RUnt")},"data-v-0d6b9133",null);t.a=o.exports},RUnt:function(e,t){},jWSI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s),o=a("eMYz"),l=a("Z1y9"),i={name:"addParts",components:{headerLast:o.a},data:function(){return{declareTitle:"新增备件",form:{partsSource:"2",pnFru:"",SN:"",ifPackage:"",ifTakeaway:"",useStatus:"3",isRecycle:"",useStatusRemark:"",partsType:"",caseId:this.$route.query.caseId},rules:{ifPackage:[{required:!0,message:"请先选择是否包装",trigger:"change"}],ifTakeaway:[{required:!0,message:"请先选择是否已带走",trigger:"change"}],useStatus:[{required:!0,message:"请先选择使用情况",trigger:"change"}],isRecycle:[{required:!0,message:"请先选择能否回收",trigger:"change"}]},partsTypeList:[],useStatus:"",useStatusList:[{useStatusName:"已使用件",useStatusId:"1"},{useStatusName:"未使用件",useStatusId:"2"},{useStatusName:"坏件",useStatusId:"3"},{useStatusName:"DOA不可用",useStatusId:"4"},{useStatusName:"未到场",useStatusId:"5"}]}},created:function(){var e=this;l.a.get("?action=/parts/GetPartsTypeList",{}).then(function(t){e.partsTypeList=t.DATA,console.log(e.partsTypeList)})},methods:{showMsg:function(e){this.$notify({title:"警示信息",dangerouslyUseHTMLString:!0,message:"<strong>"+e+"</strong>"})},DATAParams:function(){var e={};return e.PARTS_SOURCE=this.form.partsSource,e.PN_FRU=this.form.pnFru,e.SN=this.form.SN,e.TYPE=this.form.partsType,e.USE_STATUS=this.form.useStatus,e.USE_STATUS_REMARK=this.form.useStatusRemark,e.IF_PACKAGE=this.form.ifPackage,e.IF_TAKEAWAY=this.form.ifTakeaway,e.IS_RECYCLE=this.form.isRecycle,e.CASE_ID=this.$route.query.caseId,e},onSubmit:function(e){var t=this,a=new URLSearchParams,s=new Array;s.push(this.DATAParams()),s=r()(s),a.append("DATA",s),a.append("UPDATE_DATE",this.getCurrentTime()),a.append("CASE_ID",this.caseId);var o=this.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.3)"});this.$refs[e].validate(function(e){if(!e)return o.close(),t.$message({message:"请正确填写",type:"error",center:!0,customClass:"msgdefine"}),!1;l.a.post("?action=/parts/updatePartsGathering",a).then(function(e){if(console.log("params",a),console.log(e),o.close(),"0"==e.STATUSCODE){t.$message({message:"提交成功",type:"success",center:!0,customClass:"msgdefine"}),t.$router.go(0);t.$emit("change",{popBg:!1})}else{t.$message({message:e.MESSAGE+"发生错误",type:"error",center:!0,customClass:"msgdefine"});t.$emit("change",{popBg:!1})}})})},onCancel:function(){this.$emit("change",{popBg:!1})},noKeyword:function(){document.activeElement.blur()},getCurrentTime:function(){var e=(new Date).getMonth()+1;return(new Date).getFullYear()+"-"+e+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addPartsView"},[a("div",{staticClass:"content"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"1rem"}},[a("el-form-item",{attrs:{label:"备件来源"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.form.partsSource,callback:function(t){e.$set(e.form,"partsSource",t)},expression:"form.partsSource"}},[a("el-radio",{attrs:{label:"2"}},[e._v("换下件")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"PN/FRU"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入PN/FRU"},model:{value:e.form.pnFru,callback:function(t){e.$set(e.form,"pnFru",t)},expression:"form.pnFru"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"序列号"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入序列号"},model:{value:e.form.SN,callback:function(t){e.$set(e.form,"SN",t)},expression:"form.SN"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备件类型"}},[a("el-select",{attrs:{placeholder:"请选择备件类型",clearable:""},model:{value:e.form.partsType,callback:function(t){e.$set(e.form,"partsType",t)},expression:"form.partsType"}},e._l(e.partsTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.partsTypeName,value:e.partsTypeId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否有包装",prop:"ifPackage"}},[a("el-radio-group",{model:{value:e.form.ifPackage,callback:function(t){e.$set(e.form,"ifPackage",t)},expression:"form.ifPackage"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否已带走",prop:"ifTakeaway"}},[a("el-radio-group",{model:{value:e.form.ifTakeaway,callback:function(t){e.$set(e.form,"ifTakeaway",t)},expression:"form.ifTakeaway"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用情况",prop:"useStatus"}},[a("el-select",{attrs:{placeholder:"选择使用情况",clearable:""},model:{value:e.form.useStatus,callback:function(t){e.$set(e.form,"useStatus",t)},expression:"form.useStatus"}},e._l(e.useStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.useStatusName,value:e.useStatusId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"能否回收",prop:"isRecycle"}},[a("el-radio-group",{model:{value:e.form.isRecycle,callback:function(t){e.$set(e.form,"isRecycle",t)},expression:"form.isRecycle"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"回收件说明"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入回收件说明"},model:{value:e.form.useStatusRemark,callback:function(t){e.$set(e.form,"useStatusRemark",t)},expression:"form.useStatusRemark"}})],1),e._v(" "),a("el-form-item",{staticClass:"submitCell"},[a("el-button",{on:{click:e.onCancel}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"submitBtn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var _=a("VU/8")(i,n,!1,function(e){a("11Cp")},"data-v-633d1221",null);t.default=_.exports},lkKk:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty__=__webpack_require__("bOdI"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty__),__WEBPACK_IMPORTED_MODULE_2__components_Global__=__webpack_require__("YF26"),__WEBPACK_IMPORTED_MODULE_3__header_headerBaseEight__=__webpack_require__("QFtm"),__WEBPACK_IMPORTED_MODULE_4__components_load_loading__=__webpack_require__("DxVv"),__WEBPACK_IMPORTED_MODULE_5__utils_ajax__=__webpack_require__("Z1y9");__webpack_exports__.a={name:"sparePartsSortOut",components:{headerBaseEight:__WEBPACK_IMPORTED_MODULE_3__header_headerBaseEight__.a,loadingtmp:__WEBPACK_IMPORTED_MODULE_4__components_load_loading__.a},data:function(){var e;return e={isShow:!1,partsTypeList:[],sparePartsSortOutTit:"事件备件列表",caseId:this.$route.query.caseId,searchData:[],sparePartsSortOutSelectArr:[],busy:!1,loadall:!1,isSearch:!1},__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default()(e,"searchData",{caseLevel:[]}),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default()(e,"radioParts",""),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default()(e,"useStatus",""),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default()(e,"useStatusList",[{useStatusName:"已使用件",useStatusId:"1"},{useStatusName:"未使用件",useStatusId:"2"},{useStatusName:"坏件",useStatusId:"3"},{useStatusName:"DOA不可用",useStatusId:"4"},{useStatusName:"未到场",useStatusId:"5"}]),e},methods:{getSparePart:function(){var e=this;__WEBPACK_IMPORTED_MODULE_5__utils_ajax__.a.get("?action=/parts/GetCasePartsInfo&CASE_ID="+this.caseId,{}).then(function(t){e.sparePartsSortOutSelectArr=t.DATA,console.log("spare",t),e.busy=!1,e.loadall=!0}),__WEBPACK_IMPORTED_MODULE_5__utils_ajax__.a.get("?action=/parts/GetPartsTypeList",{}).then(function(t){e.partsTypeList=t.DATA})},showMsg:function(e){this.$message(e)},changePartsParams:function(e){var t={};return t.PARTS_ID=e.partsId,t.PARTS_SOURCE=e.partsSource,t.PN_FRU=e.pnFru,t.SN=e.sn,t.TYPE=e.type,t.USE_STATUS=e.useStatus,t.USE_STATUS_REMARK=e.useStatusRemark,t.IF_PACKAGE=e.ifPackage,t.IF_TAKEAWAY=e.ifTakeaway,t.IS_RECYCLE=e.isRecycle,t.CASE_ID=this.$route.query.caseId,t},supplyPartsParams:function(){},takeDownParts:function(e){var t={PARTS_ID:"",PARTS_SOURCE:2};return t.SN=e.takeDownSN,t.IS_RECYCLE=1,t.USE_STATUS_REMARK="",t.MODEL_NAE=e.modelName,t.COMEFROM_SN=e.sn,t.COMEFROM_PARTS_ID=e.partsId,t.CASE_ID=e.caseId,t.PN_FRU=e.pnFru,t.TYPE=e.type,t.IF_PACKAGE=e.ifPackage,t.IF_TAKEAWAY=e.ifTakeaway,t},ifOperation:function(e){if(null!=e.ifPackage)if(null!=e.ifTakeaway)if(null!=e.useStatus){if(null!=e.isRecycle)return!0;this.warning("请选择是否回收")}else this.warning("请确认选择使用情况");else this.warning("请选择是否带走");else this.warning("请选择是否包装")},onArray:function onArray(formUpdateParts){var params=new URLSearchParams,array=new Array,list=[],params_dict={},ifJudge=this.ifOperation(formUpdateParts);if(console.log(formUpdateParts),1==ifJudge){if(console.log("wewewe",formUpdateParts.takeDownSN),void 0!=formUpdateParts.takeDownSN&&"1"==formUpdateParts.partsSource&&"1"==formUpdateParts.useStatus){var chageArray=this.changePartsParams(formUpdateParts),takeArray=this.takeDownParts(formUpdateParts);array.push(chageArray),array.push(takeArray)}else if(void 0==formUpdateParts.takeDownSN&&"1"==formUpdateParts.partsSource&&"1"==formUpdateParts.useStatus)array="";else if(void 0==formUpdateParts.takeDownSN&&"2"==formUpdateParts.partsSource){var _chageArray=this.changePartsParams(formUpdateParts);array.push(_chageArray)}else{var _chageArray2=this.changePartsParams(formUpdateParts);array.push(_chageArray2)}return array=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(array),params.append("DATA",array),params.append("UPDATE_DATE",this.getCurrentTime()),params.append("CASE_ID",this.caseId),console.log("qweasd",params,eval(params.get("DATA")).length,eval(params.get("DATA"))),params}return array="judge_no",array=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(array),params.append("DATA",array),params},warning:function(e){this.$message({message:e,type:"warning",center:!0,customClass:"msgdefine"})},onSubmit:function onSubmit(formUpdateParts){var _this2=this,params=this.onArray(formUpdateParts),params_DATA=eval(params.get("DATA"));if("judge_no"==params_DATA)console.log(params_DATA);else{var loading=this.$loading({lock:!0,text:"提交中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.3)"});0==params_DATA.length&&""==params_DATA?(loading.close(),this.$message({message:"请输入：换下件SN",type:"warning",center:!0,customClass:"msgdefine"}),this.isShow=!0):__WEBPACK_IMPORTED_MODULE_5__utils_ajax__.a.post("?action=/parts/updatePartsGathering",params).then(function(e){loading.close(),"0"==e.STATUSCODE?(_this2.$message({message:"提交成功",type:"success",center:!0,customClass:"msgdefine"}),__WEBPACK_IMPORTED_MODULE_5__utils_ajax__.a.get("?action=/parts/GetCasePartsInfo&CASE_ID="+_this2.caseId,{}).then(function(e){_this2.sparePartsSortOutSelectArr=e.DATA,_this2.busy=!1,_this2.loadall=!0}),_this2.isShow=!1):_this2.$message({message:e.MESSAGE+"发生错误",type:"error",center:!0,customClass:"msgdefine"})})}},getSearParams:function(e){},onPartsArrange:function(){console.log("ASSSSSSSSSSSSSSS")},loadMore:function(){var e=this;this.busy||this.loadall||(this.busy=!0,setTimeout(function(){e.getSparePart()},500))},getCurrentTime:function(){var e=(new Date).getMonth()+1;return(new Date).getFullYear()+"-"+e+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()},ifChoiseUsed:function(e){"1"==e.useStatus&&"1"==e.partsSource?this.isShow=!0:this.isShow=!1}},created:function(){}}},whMN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("lkKk"),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sparePartsSortOutSelectView"},[a("header-base-eight",{attrs:{title:e.sparePartsSortOutTit}}),e._v(" "),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"content",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[a("div",{staticClass:"SelectListCell"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sparePartsSortOutSelectArr}},[a("el-table-column",{attrs:{prop:"date",label:"修改",width:"8%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"contentPopover"},[a("el-popover",{attrs:{placement:"bottom",width:"340",trigger:"click"}},[a("el-button",{staticClass:"el-icon-edit-outline",attrs:{slot:"reference"},on:{click:function(a){e.ifChoiseUsed(t.row)}},slot:"reference"}),e._v(" "),a("div",{staticClass:"contentParts"},[a("el-form",{attrs:{"label-width":"1rem"}},[a("el-form-item",{attrs:{label:"备件来源"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:t.row.partsSource,callback:function(a){e.$set(t.row,"partsSource",a)},expression:"scope.row.partsSource"}},[a("el-radio",{attrs:{label:"1"}},[e._v("供货件")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("换下件")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"PN/FRU"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入PN/FRU"},model:{value:t.row.pnFru,callback:function(a){e.$set(t.row,"pnFru",a)},expression:"scope.row.pnFru"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"序列号"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入序列号"},model:{value:t.row.sn,callback:function(a){e.$set(t.row,"sn",a)},expression:"scope.row.sn"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备件类型"}},[a("el-select",{attrs:{placeholder:"请选择备件类型",clearable:""},model:{value:t.row.typeName,callback:function(a){e.$set(t.row,"typeName",a)},expression:"scope.row.typeName"}},e._l(e.partsTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.partsTypeName,value:e.partsTypeId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否有包装"}},[a("el-radio-group",{model:{value:t.row.ifPackage,callback:function(a){e.$set(t.row,"ifPackage",a)},expression:"scope.row.ifPackage"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否已带走"}},[a("el-radio-group",{model:{value:t.row.ifTakeaway,callback:function(a){e.$set(t.row,"ifTakeaway",a)},expression:"scope.row.ifTakeaway"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用情况"}},[a("el-select",{attrs:{placeholder:"选择使用情况",clearable:""},on:{change:function(a){e.ifChoiseUsed(t.row)}},model:{value:t.row.useStatus,callback:function(a){e.$set(t.row,"useStatus",a)},expression:"scope.row.useStatus"}},e._l(e.useStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.useStatusName,value:e.useStatusId}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{label:"换下件SN"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入换下件SN"},model:{value:t.row.takeDownSN,callback:function(a){e.$set(t.row,"takeDownSN",a)},expression:"scope.row.takeDownSN"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"能否回收"}},[a("el-radio-group",{model:{value:t.row.isRecycle,callback:function(a){e.$set(t.row,"isRecycle",a)},expression:"scope.row.isRecycle"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("暂缓")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"回收件说明"}},[a("el-input",{staticClass:"bInput",attrs:{placeholder:"请输入回收件说明"},model:{value:t.row.useStatusRemark,callback:function(a){e.$set(t.row,"useStatusRemark",a)},expression:"scope.row.useStatusRemark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物流信息"}},[a("el-form-item",{attrs:{label:"物流公司"}},[a("p",{staticStyle:{color:"green",height:"30px"}},[e._v(e._s(t.row.deliveryInfo))])]),e._v(" "),a("el-form-item",{attrs:{label:"物流单号"}},[a("p",{staticStyle:{color:"green",height:"30px"}},[e._v(e._s(t.row.transcode))])])],1),e._v(" "),a("el-form-item",{staticClass:"submitBtnSpare"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.onSubmit(t.row)}}},[e._v("提交")])],1)],1)],1)],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ifArrangeName",label:"已整理",width:"12%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dealStatus",label:"处理状态",width:"14%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"partsSourceName",label:"来源",width:"14%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pnFru",label:"PN/FRU",width:"18%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"备件类型",width:"14%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sn",label:"SN",width:"20%"}})],1)],1),e._v(" "),a("loadingtmp",{attrs:{busy:e.busy,loadall:e.loadall}})],1)],1)},staticRenderFns:[]};var o=function(e){a("L9eS")},l=a("VU/8")(s.a,r,!1,o,"data-v-4a418fdf",null);t.default=l.exports}});