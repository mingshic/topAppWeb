webpackJsonp([53],{"7czk":function(e,t){},MKLx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("eMYz"),o=(s("YF26"),s("Z1y9")),r=s("DxVv"),a={name:"workBenchIndustryCustomerList",components:{headerLast:n.a,loadingtmp:r.a},data:function(){return{workBenchIndustryCustomerTit:"行业-客户列表",workBenchIndustryCustomerListObj:[],page:1,pageSize:20,busy:!1,loadall:!1,tableHeight:400,searchData:{BUSSINESS_TYPE:this.$route.query.BUSINESS_TYPE,INDUSTRY_NAME:this.$route.query.INDUSTRY_NAME},IndustryCustomerTable:[{prop:"CUST_NAME",label:"客户名称",width:"33%"},{prop:"PRO_NUM",label:"项目数量",width:"33%"},{prop:"AMOUNT",label:"合同规模",width:"34%"}]}},created:function(){this.getIndustryCustomerList()},mounted:function(){var e=this;this.$nextTick(function(){var t=e;console.log("ssssssss",e.type),e.tableHeight=document.documentElement.clientHeight-45,window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-45}})},methods:{getIndustryCustomerList:function(){var e=this,t={BUSSINESS_TYPE:this.$route.query.BUSINESS_TYPE,INDUSTRY_NAME:this.$route.query.INDUSTRY_NAME,PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize},s=this.page>1;o.a.get("?action=/project/GetCustDetail",t).then(function(t){console.log(t),e.workBenchIndustryCustomerListObj=s?e.workBenchIndustryCustomerListObj.concat(t.data):t.data,0==t.data.length||t.data.length<e.pageSize?(e.busy=!0,e.loadall=!0,e.$message({message:"已加载全部数据",type:"success",center:!0,duration:1e3,customClass:"msgdefine"})):(e.busy=!1,e.page++)})},rowClick:function(e){console.log("row",e),this.$router.push({name:"workBenchInfoDetail",query:{cust_name:e.CUST_NAME,business:e.BUSINESS_TYPE,industry:e.INDUSTRY,isSearch:1}})},loadMore:function(){var e=this;if(console.log(this.busy),this.busy)return console.log("eeeeeeeeeeeeeeeee"),!1;this.busy=!0,setTimeout(function(){e.getIndustryCustomerList()},1e3)}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workBenchIndustryCustomerView"},[s("header-last",{attrs:{title:e.workBenchIndustryCustomerTit}}),e._v(" "),s("div",{staticStyle:{height:"0.45rem"}}),e._v(" "),s("div",{staticClass:"workBenchIndustryCustomerContent"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.busy&&!e.loadall,expression:"busy && !loadall"},{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:e.workBenchIndustryCustomerListObj,"element-loading-text":"正在加载下一页",height:e.tableHeight},on:{"row-click":e.rowClick}},[e._l(e.IndustryCustomerTable,function(e){return[s("el-table-column",{key:e.id,attrs:{prop:e.prop,label:e.label,"min-width":e.width}})]})],2)],1)],1)},staticRenderFns:[]};var u=s("VU/8")(a,i,!1,function(e){s("7czk")},"data-v-72759668",null);t.default=u.exports}});