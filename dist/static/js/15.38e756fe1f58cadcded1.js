webpackJsonp([15],{"7FQG":function(e,t){},Sy83:function(e,t){},bt7h:function(e,t){},dbLq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("YF26"),o=a("eMYz"),l=a("DxVv"),i=a("Z1y9"),s={name:"proPlan",props:{proplanpage:Number},components:{loadingtmp:l.a},data:function(){return{tableData:[],table_arr:[{prop:"TASK_TYPE",label:"类型",fixed:!0,width:"15%"},{prop:"CUST_NAME",label:"客户",fixed:!0,width:"40%"},{prop:"CREATE_ON",label:"提交日期",fixed:!0,width:"25%"},{prop:"TASK_STATUS",label:"状态",fixed:!0,width:"20%"}],page:1,pageSize:30,busy:!1,loadall:!1,tableHeight:400,type:this.$route.query.TYPE}},created:function(){this.getEventList()},mounted:function(){var e=this;this.$nextTick(function(){var t=e;e.tableHeight=document.documentElement.clientHeight-("my"==e.type?45:90),window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-("my"==this.type?45:90)}})},methods:{loadMore:function(){var e=this;if(this.busy)return!1;this.busy=!0,setTimeout(function(){e.getEventList()},1e3)},getEventList:function(){var e=this,t=this.page>1,a={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize,TYPE:this.type};i.a.get("?action=GetComplaintsList",a).then(function(a){var n=a.data;n=n.map(function(e){return null!=e.COMPLAINT_COMMENT&&(e.COMPLAINT_COMMENT=e.COMPLAINT_COMMENT.replace(/\n/g,"<br/>")),e}),e.tableData=t?e.tableData.concat(a.data):a.data,console.log(e.tableData),0==a.data.length||a.data.length<e.pageSize?(e.busy=!0,e.loadall=!0,e.$message({message:"已加载全部数据",type:"success",center:!0,duration:1e3,customClass:"msgdefine"})):(e.busy=!1,e.page++)})},rowClick:function(e){this.$router.push({name:"mineFeedbackShow",query:{complantId:e.COMPLANT_ID}})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"proPlanCell"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.busy&&!e.loadall,expression:"busy && !loadall"},{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],ref:"etable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","element-loading-text":"正在加载下一页",height:e.tableHeight},on:{"row-click":e.rowClick}},[e._l(e.table_arr,function(t){return[a("el-table-column",{key:t.id,attrs:{prop:t.prop,label:t.label,"min-width":t.width},scopedSlots:e._u([{key:"default",fn:function(n){return["COMPLAINT_COMMENT"==t.prop?[a("span",{domProps:{innerHTML:e._s(n.row.COMPLAINT_COMMENT)}})]:a("span",{domProps:{innerHTML:e._s(n.row[t.prop])}})]}}])})]})],2)],1)])},staticRenderFns:[]};var c=a("VU/8")(s,r,!1,function(e){a("bt7h")},"data-v-6109b9c6",null).exports,d={name:"proPlan",props:{proplanpage:Number},components:{loadingtmp:l.a},data:function(){return{tableData:[],table_arr:[{prop:"PROJECT_NAME",label:"项目名称",fixed:!0,width:"45%"},{prop:"TOTAL_SCORE",label:"分值",fixed:!0,width:"15%"},{prop:"EVALUATE_FROM_NAME",label:"评价人",fixed:!0,width:"18%"},{prop:"EVALUATE_TIME",label:"评价时间",fixed:!0,width:"22%"}],page:1,pageSize:30,busy:!1,loadall:!1,tableHeight:400}},created:function(){this.getEventList()},mounted:function(){var e=this;this.$nextTick(function(){var t=e;console.log(document.documentElement.clientHeight),console.log(e.$refs.etable.$el.offsetTop),e.tableHeight=document.documentElement.clientHeight-90,window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-90}})},methods:{loadMore:function(){var e=this;if(this.busy)return!1;this.busy=!0,setTimeout(function(){e.getEventList()},1e3)},getEventList:function(){var e=this,t=this.page>1,a={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize};i.a.get("?action=GetProjectEvaluate",a).then(function(a){console.log(a),e.tableData=t?e.tableData.concat(a.data):a.data,console.log(e.tableData),0==a.data.length||a.data.length<e.pageSize?(e.busy=!0,e.loadall=!0,e.$message({message:"已加载全部数据",type:"success",center:!0,duration:1e3,customClass:"msgdefine"})):(e.busy=!1,e.page++)})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"proPlanCell"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.busy&&!e.loadall,expression:"busy && !loadall"},{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],ref:"etable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","element-loading-text":"正在加载下一页",height:e.tableHeight}},[e._l(e.table_arr,function(t){return[a("el-table-column",{key:t.id,attrs:{prop:t.prop,label:t.label,"min-width":t.width},scopedSlots:e._u([{key:"default",fn:function(n){return["TOTAL_SCORE"==t.prop?[a("div",[n.row[t.prop]<7?a("i",{staticStyle:{color:"#ff0000"}},[e._v(e._s(n.row[t.prop]))]):a("i",[e._v(e._s(n.row[t.prop]))])])]:a("span",{staticClass:"table_name"},[e._v(e._s(n.row[t.prop]))])]}}])})]}),e._v(" "),[e._v("1211")]],2)],1)])},staticRenderFns:[]};var u=a("VU/8")(d,p,!1,function(e){a("7FQG")},"data-v-05462b74",null).exports,m={name:"proPlan",props:{proplanpage:Number},components:{loadingtmp:l.a},data:function(){return{tableData:[],table_arr:[{prop:"PROJECT_NAME",label:"项目名称",fixed:!0,width:"45%"},{prop:"TOTAL_SCORE",label:"分值",fixed:!0,width:"15%"},{prop:"EVALUATE_FROM_NAME",label:"评价人",fixed:!0,width:"18%"},{prop:"EVALUATE_TIME",label:"评价时间",fixed:!0,width:"22%"}],page:1,pageSize:30,busy:!1,loadall:!1,tableHeight:400}},created:function(){this.getEventList()},mounted:function(){var e=this;this.$nextTick(function(){var t=e;console.log(document.documentElement.clientHeight),console.log(e.$refs.etable.$el.offsetTop),e.tableHeight=document.documentElement.clientHeight-90,window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-90}})},methods:{loadMore:function(){var e=this;if(this.busy)return!1;this.busy=!0,setTimeout(function(){e.getEventList()},1e3)},getEventList:function(){var e=this,t=this.page>1,a={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize};i.a.get("?action=GetCaseEvaluate",a).then(function(a){console.log(a),e.tableData=t?e.tableData.concat(a.data):a.data,console.log(e.tableData),0==a.data.length||a.data.length<e.pageSize?(e.busy=!0,e.loadall=!0,e.$message({message:"已加载全部数据",type:"success",center:!0,duration:1e3,customClass:"msgdefine"})):(e.busy=!1,e.page++)})},rowClick:function(e){console.log(e),this.$router.push({name:"eventEvaluationShow",query:{evaluateid:e.EVALUATE_ID,serviceId:e.SERVICE_ID,caseId:e.CASE_ID,serviceType:e.SERVICE_TYPE}})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"proPlanCell"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.busy&&!e.loadall,expression:"busy && !loadall"},{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],ref:"etable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","element-loading-text":"正在加载下一页",height:e.tableHeight},on:{"row-click":e.rowClick}},[e._l(e.table_arr,function(t){return[a("el-table-column",{key:t.id,attrs:{prop:t.prop,label:t.label,"min-width":t.width},scopedSlots:e._u([{key:"default",fn:function(n){return["TOTAL_SCORE"==t.prop?[a("div",[n.row[t.prop]<=3?a("i",{staticStyle:{color:"#ff0000"}},[e._v(e._s(n.row[t.prop]))]):a("i",[e._v(e._s(n.row[t.prop]))])])]:a("span",{staticClass:"table_name"},[e._v(e._s(n.row[t.prop]))])]}}])})]}),e._v(" "),[e._v("1211")]],2)],1)])},staticRenderFns:[]};var g=a("VU/8")(m,h,!1,function(e){a("qLrx")},"data-v-a8124f7e",null).exports,b={name:"programShow",components:{headerLast:o.a,complaintList:c,proSatisfy:u,caseEvaluate:g},data:function(){return{programShowTit:"意见和投诉",programListArr:[{}],projectInfo:{},activeName:"complaintList",page:1,pageSize:10,busy:!1,loadall:!1,proplanpage:0,promachinepage:0,needpage:{promachine:"promachinepage",proplan:"proplanpage"},prohealthpage:1,type:this.$route.query.TYPE}},created:function(){},mounted:function(){},methods:{chtab:function(){this[this.activeName+"page"]=1},handleScroll:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t=document.querySelector(".el-tabs__header"),a=document.querySelector(".programTable").offsetTop-45;e>=a?(t.classList.add("moveTop"),t.style.top=Number(e)/100-a/100+"rem"):(t.classList.remove("moveTop"),t.style.top="0rem")},getEventList:function(e){var t=this;i.a.get("?action=GetFocusCase&EMPID="+n.a.empId,{params:{PAGE_NUM:this.page,TYPE:this.type,PAGE_TOTAL:this.pageSize}}).then(function(a){t.eventListArr=e?t.eventListArr.concat(a.data):a.data,0==a.data.length||a.data.length<t.pageSize?(t.busy=!0,t.loadall=!0):(t.busy=!1,t.page++)})},loadMore:function(){var e=this;console.log("到底了"),this.needpage[this.activeName]&&(this.busy=!0,setTimeout(function(){e[e.activeName+"page"]++},500))}},destroyed:function(){window.removeEventListener("scroll",this.handleScroll,!0)},beforeRouteLeave:function(e,t,a){"home"==e.name&&(e.meta.isUseCache=!0),a()}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"programShowView"},[a("header-last",{attrs:{title:e.programShowTit}}),e._v(" "),a("div",{staticStyle:{height:"0.45rem"}}),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"programTable"},[a("el-tabs",{class:"my"==e.type?"hidetab":"",on:{"tab-click":e.chtab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"意见投诉",name:"complaintList"}},[a("complaint-list")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"项目满意度",name:"proSatisfy",lazy:""}},[a("pro-satisfy")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"case评价",name:"caseEvaluate",lazy:""}},[a("case-evaluate")],1)],1)],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(b,f,!1,function(e){a("Sy83"),a("xAhh")},"data-v-cdb0d6a8",null);t.default=v.exports},qLrx:function(e,t){},xAhh:function(e,t){}});