webpackJsonp([24],{"8CGc":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("bOdI"),r=a.n(s),o=(a("YF26"),a("Z1y9")),i={name:"searchMyWork",components:{},props:["queryData"],data:function(){return{form:{caseLevel:"",projectNo:"",projectName:"",caseNo:"",creatorRealname:"",expectStart:"",expectEnd:"",workRequire:""},caseLevelArr:[]}},watch:{},created:function(){var e=this;console.log("focus serach view"),console.log(this.queryData),o.a.get("?action=getDict&type=NT_CASE_LEVEL","").then(function(t){console.log(t.data),e.caseLevelArr=t.data}),this.form.projectNo=this.queryData.projectNo,this.form.projectName=this.queryData.projectName,this.form.caseNo=this.queryData.caseNo,this.form.caseLevel=this.queryData.caseLevel,this.form.creatorRealname=this.queryData.creatorRealname,this.form.expectStart=this.queryData.expectStart,this.form.expectEnd=this.queryData.expectEnd,this.form.workRequire=this.queryData.workRequire},methods:{onCancel:function(){this.$emit("change",{popBg:!1})},onSearch:function(){var e=this.form;this.$emit("search",e);this.$emit("change",{popBg:!1})},noKeyword:function(){document.activeElement.blur()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchMyWorkView"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"项目编号","label-width":"0.8rem"}},[a("el-input",{staticClass:"bInput",model:{value:e.form.projectNo,callback:function(t){e.$set(e.form,"projectNo",t)},expression:"form.projectNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称","label-width":"0.8rem"}},[a("el-input",{staticClass:"bInput",model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"事件编号","label-width":"0.8rem"}},[a("el-input",{staticClass:"bInput",model:{value:e.form.caseNo,callback:function(t){e.$set(e.form,"caseNo",t)},expression:"form.caseNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"事件级别","label-width":"0.8rem"}},[a("el-select",{attrs:{placeholder:"请选择事件级别",multiple:""},model:{value:e.form.caseLevel,callback:function(t){e.$set(e.form,"caseLevel",t)},expression:"form.caseLevel"}},e._l(e.caseLevelArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人","label-width":"0.8rem"}},[a("el-input",{staticClass:"bInput",model:{value:e.form.creatorRealname,callback:function(t){e.$set(e.form,"creatorRealname",t)},expression:"form.creatorRealname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"起始日期","label-width":"0.8rem"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},on:{focus:e.noKeyword},model:{value:e.form.expectStart,callback:function(t){e.$set(e.form,"expectStart",t)},expression:"form.expectStart"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束日期","label-width":"0.8rem"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},on:{focus:e.noKeyword},model:{value:e.form.expectEnd,callback:function(t){e.$set(e.form,"expectEnd",t)},expression:"form.expectEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内容要求","label-width":"0.8rem"}},[a("el-input",{staticClass:"bInput",model:{value:e.form.workRequire,callback:function(t){e.$set(e.form,"workRequire",t)},expression:"form.workRequire"}})],1),e._v(" "),a("el-form-item",{staticClass:"searchBtn"},[a("el-button",{on:{click:e.onCancel}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"searchBtnCell",on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1)},staticRenderFns:[]};var n={name:"headerBaseSeven",components:{searchMyWork:a("VU/8")(i,c,!1,function(e){a("nPjP")},"data-v-3a354529",null).exports},data:function(){return{headerRight:"查询",popBg:!1}},props:["title","queryData"],watch:{},created:function(){},methods:{updatePopBg:function(e){console.log(e+"=========="),console.log(e.popBg),this.popBg=e.popBg},searchData:function(e){this.$emit("searchPro",e)},back:function(e){this.$router.back(-1)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"headerView"},[a("header",[a("div",{staticClass:"headerLeft",on:{click:e.back}},[a("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),a("h2",[e._v(e._s(e.title))]),e._v(" "),a("div",{staticClass:"headerRight",on:{click:function(t){t.stopPropagation(),e.popBg=!e.popBg}}},[e._v(e._s(e.headerRight))])]),e._v(" "),e.popBg?[a("div",{staticClass:"popBg"},[a("search-my-work",{attrs:{queryData:e.queryData},on:{change:e.updatePopBg,search:e.searchData}})],1)]:e._e()],2)},staticRenderFns:[]};var h={name:"workBenchTaskList",components:{headerBaseSeven:a("VU/8")(n,l,!1,function(e){a("9roO")},"data-v-4f9b8868",null).exports,loadingtmp:a("DxVv").a},data:function(){return r()({workBenchTaskListTit:"任务列表",workStatus:this.$route.query.workStatus,searchData:[],workBenchTaskListArr:[],page:1,pageSize:10,busy:!1,loadall:!1,isSearch:!1},"searchData",{caseLevel:[]})},activated:function(){console.log(this.$route.meta.isUseCache),this.$route.meta.isUseCache||(this.workBenchTaskListArr=[],this.busy=!1,this.loadall=!1,this.page=1,this.loadMore()),this.$route.meta.isUseCache=!1},methods:{getEventList:function(){var e=this,t={PAGENUM:this.page,PAGETOTAL:this.pageSize};this.isSearch&&(t.PROJECT_NO=this.searchData.projectNo,t.PROJECT_NAME=this.searchData.projectName,t.CASE_NO=this.searchData.caseNo,t.CASE_LEVEL=this.searchData.caseLevel.join(","),t.CREATE_REALNAME=this.searchData.creatorRealname,t.START_DATA_BEGIN=this.searchData.expectStart,t.START_DATA_END=this.searchData.expectEnd,t.WORK_REQUIRE=this.searchData.workRequire);var a=this.page>1;o.a.get("?action=/work/getWorkList&WORK_STATUS="+this.$route.query.workStatus,t).then(function(t){console.log(t),e.workBenchTaskListArr=a?e.workBenchTaskListArr.concat(t.DATA):t.DATA,0==t.DATA.length||t.DATA.length<e.pageSize?(e.busy=!1,e.loadall=!0):(e.busy=!1,e.page++)})},getSearParams:function(e){},loadMore:function(){var e=this;this.busy||this.loadall||(this.busy=!0,setTimeout(function(){e.getEventList()},500))},searchList:function(e){this.searchData=e,this.workBenchTaskListArr=[],this.isSearch=!0,this.page=1,this.loadall=!1,this.loadMore()}},created:function(){}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"workBenchTaskListView"},[a("header-base-seven",{attrs:{title:e.workBenchTaskListTit,queryData:e.searchData},on:{searchPro:e.searchList}}),e._v(" "),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"content",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[e._l(e.workBenchTaskListArr,function(t){return a("div",{key:t.id,staticClass:"taskListCell"},[a("router-link",{attrs:{to:{name:"workBenchTaskDetailInfo",query:{workId:t.workId,caseId:t.caseId}}}},[a("ul",{staticClass:"tableTd"},[a("li",[a("span",[e._v("派工单号：")]),e._v(" "),a("span",{staticStyle:{color:"#2698d6"}},[e._v(e._s(t.workNo))])]),e._v(" "),a("li",[a("span",[e._v("状态：")]),e._v(" "),a("span",[e._v(e._s(t.workStatusName))])]),e._v(" "),a("li",[a("span",[e._v("派工类型：")]),e._v(" "),a("span",[e._v(e._s(t.workType))])]),e._v(" "),a("li",[a("span",[e._v("事件编号：")]),e._v(" "),a("span",[e._v(e._s(t.caseNo))])]),e._v(" "),a("li",[a("span",[e._v("事件类型：")]),e._v(" "),a("span",[e._v(e._s(t.caseType))])]),e._v(" "),a("li",[a("span",[e._v("项目名称：")]),e._v(" "),a("span",[e._v(e._s(t.projectName))])]),e._v(" "),a("li",[a("span",[e._v("工作要求：")]),e._v(" "),a("span",[e._v(e._s(t.workRequire))])]),e._v(" "),a("li",[a("span",[e._v("设备类型：")]),e._v(" "),a("span",[e._v(e._s(t.deviceName))])]),e._v(" "),a("li",[a("span",[e._v("序列号：")]),e._v(" "),a("span",[e._v(e._s(t.sn))])])])])],1)}),e._v(" "),a("loadingtmp",{attrs:{busy:e.busy,loadall:e.loadall}})],2)],1)},staticRenderFns:[]};var p=a("VU/8")(h,u,!1,function(e){a("D6k4")},"data-v-5cb85004",null);t.default=p.exports},"9roO":function(e,t){},D6k4:function(e,t){},nPjP:function(e,t){}});