webpackJsonp([59],{EFkS:function(e,t){},f7qT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("YF26");var n=a("eMYz"),o=a("Z1y9"),i={name:"workBenchPOinfo",components:{headerLast:n.a},data:function(){return{workBenchPOinfoTit:"PO管理",POinfoTab:[{name:"first",label:"人员",tableData:[]},{name:"second",label:"备件",tableData:[]}],activeName:"first",POinfotable:[{prop:"YM",label:"年月",fixed:!0,width:"34%"},{prop:"TOTALAMOUNT",label:"总金额",fixed:!0,width:"33%"},{prop:"FAMOUNT",label:"已支付金额",fixed:!0,width:"33%"}],page:1,pageSize:30,busy:!1,loadall:!1,tableHeight:400}},created:function(){this.getPOInfoList()},mounted:function(){var e=this;this.$nextTick(function(){var t=e;e.tableHeight=document.documentElement.clientHeight-45,window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-45},console.log("ssssssss",t.tableHeight)})},methods:{getPOInfoList:function(){var e=this,t={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize};console.log("params:",t);var a=this.page>1;o.a.get("?action=GetPoPerson",t).then(function(t){e.POinfoTab[0].tableData=a?e.POinfoTab[0].tableData.concat(t.data):t.data,0==t.data.length||t.data.length<e.pageSize?(e.busy=!0,e.loadall=!0,e.$message({message:"已加载全部数据",type:"success",center:!0,duration:1e3,customClass:"msgdefine"})):(e.busy=!1,e.page++)}),o.a.get("?action=GetPoParts",t).then(function(t){e.POinfoTab[1].tableData=a?e.POinfoTab[1].tableData.concat(t.data):t.data})},loadMore:function(){var e=this;if(console.log("this.busy:",this.busy),this.busy)return!1;this.busy=!0,setTimeout(function(){e.getPOInfoList()},1e3)},rowClick:function(e){console.log("111111111111",e),0==e.__ob__.value.KIND&&this.$router.push({name:"workBenchPOStaff",query:{YM:e.YM}}),1==e.__ob__.value.KIND&&this.$router.push({name:"workBenchPOParts",query:{YM:e.YM}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"workBenchPOinfoView"},[a("header-last",{attrs:{title:e.workBenchPOinfoTit}}),e._v(" "),a("div",{staticStyle:{height:"0.45rem"}}),e._v(" "),a("div",{staticClass:"workBenchPOinfoContent"},[a("el-tabs",{staticStyle:{overflow:"scroll"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.POinfoTab,function(t){return[a("el-tab-pane",{key:t.id,attrs:{label:t.label,name:t.name}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.busy&&!e.loadall,expression:"busy && !loadall"},{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],staticStyle:{width:"100%",border:"0.01rem solid #e1e1e1"},attrs:{stripe:"","element-loading-text":"正在加载下一页",data:t.tableData,height:e.tableHeight},on:{"row-click":e.rowClick}},[e._l(e.POinfotable,function(t){return[a("el-table-column",{key:t.id,attrs:{prop:t.prop,label:t.label,"min-width":t.width},scopedSlots:e._u([{key:"default",fn:function(n){return[a("span",{staticClass:"table_name"},[e._v(e._s(n.row[t.prop]))])]}}])})]})],2)],1)]})],2)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,l,!1,function(e){a("EFkS")},"data-v-578eabff",null);t.default=s.exports}});