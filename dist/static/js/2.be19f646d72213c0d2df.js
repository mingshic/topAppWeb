webpackJsonp([2],{Zdot:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("hK4+"),i=e("DxVv"),r=(e("YF26"),e("Z1y9")),o={name:"workBenchMyProAll",components:{headerBaseFive:s.a,loadingtmp:i.a},data:function(){return{workBenchMyProTit:"所有项目",workBenchMyProTab:[{name:"first",label:"执行中",programListArr:[],numname:"execNum"},{name:"second",label:"已过保",programListArr:[],numname:"closeNum"},{name:"third",label:"全部",programListArr:[],numname:"allNum"}],activeName:"first",searchpage:1,isSearch:0,page:1,pageSize:10,busy:!1,loadall:!1,tab_box:1,searchData:{industry:[]},objpages:{first:{page:1,loadall:!1,IF_SURANCE:1,idx:0,isSearch:0},second:{page:1,loadall:!1,IF_SURANCE:0,idx:1,isSearch:0},third:{page:1,loadall:!1,IF_SURANCE:"",idx:2,isSearch:0}},totalData:{execNum:0,closeNum:0,allNum:0}}},mounted:function(){},activated:function(){this.$route.meta.isUseCache||(this.busy=!1,this.loadall=!1,this.page=1,this.objpages.first.page=1,this.objpages.first.loadall=!1,this.workBenchMyProTab[0].programListArr=[],this.objpages.second.loadall=!1,this.workBenchMyProTab[1].programListArr=[],this.objpages.third.loadall=!1,this.workBenchMyProTab[2].programListArr=[],this.loadMore()),this.$route.meta.isUseCache=!1},methods:{tabClick:function(a){console.log("tabclick");var t=this.objpages[this.activeName];if(this.isSearch!=t.isSearch)return t.page=1,t.loadall=!1,t.programListArr=[],t.isSearch=this.isSearch,void this.loadMore();1!=t.page||t.loadall||this.loadMore()},returnList:function(a,t,e){return e=a?e.concat(t.data):t.data,0==t.data.length||t.data.length<this.pageSize?(this.busy=!1,this.loadall=!0,this.objpages[this.activeName].loadall=!0):(this.busy=!1,this.objpages[this.activeName].page++),e},getEventList:function(){var a=this,t=this.objpages[this.activeName].page>1,e=this.objpages[this.activeName],s={PAGE_NUM:e.page,PAGE_TOTAL:this.pageSize,IF_SURANCE:e.IF_SURANCE};this.searchData&&(s.BUSINESS_TYPE=this.searchData.business,s.INDUSTRY=this.searchData.industry.join(","),s.PROJECT_NAME=this.searchData.proName,s.CUST_NAME=this.searchData.customer,s.PM_NAME=this.searchData.PM,s.SALE_NAME=this.searchData.sale),console.log(s),r.a.get("?action=GetProjectList&TYPE=all",s).then(function(s){console.log(s),a.totalData=s.totalData;var i=a.workBenchMyProTab[e.idx].programListArr;a.workBenchMyProTab[e.idx].programListArr=a.returnList(t,s,i)})},loadMore:function(){var a=this;if(this.busy||this.objpages[this.activeName].loadall)return!1;this.busy=!0,console.log("loadMore"),setTimeout(function(){a.getEventList()},500)},getSearParams:function(a){this.activeName="third",this.objpages.third.page=1,this.objpages.third.loadall=!1,this.loadall=!1,this.workBenchMyProTab[2].programListArr=[],this.objpages.third.isSearch=1,this.isSearch=1,this.searchData=a,this.loadMore(),this.objpages.first.isSearch=0,this.objpages.first.loadall=!1,this.workBenchMyProTab[0].programListArr=[],this.objpages.second.isSearch=0,this.objpages.second.loadall=!1,this.workBenchMyProTab[1].programListArr=[]}}},l={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"workBenchMyProAllView"},[e("header-base-five",{attrs:{title:a.workBenchMyProTit,queryData:a.searchData},on:{searchPro:a.getSearParams}}),a._v(" "),e("div",{staticStyle:{height:"0.45rem"}}),a._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:a.loadMore,expression:"loadMore"}],staticClass:"workBenchMyProAllContent",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[e("el-tabs",{on:{"tab-click":a.tabClick},model:{value:a.activeName,callback:function(t){a.activeName=t},expression:"activeName"}},[a._l(a.workBenchMyProTab,function(t){return[e("el-tab-pane",{key:t.id,attrs:{label:t.label+"("+a.totalData[t.numname]+")",name:t.name}},[e("div",{staticStyle:{overflow:"auto"}},a._l(t.programListArr,function(t){return e("div",{key:t.id,staticClass:"programCell"},[e("router-link",{attrs:{to:{name:"programShow",query:{projectId:t.PROJECT_ID,type:"home_page"}}}},[e("div",{staticClass:"cellTop"},[e("el-row",[e("el-col",{attrs:{span:11}},[e("div",{staticClass:"cellTopNum"},[a._v(a._s(t.PROJECT_CODE))])]),a._v(" "),e("el-col",{attrs:{span:5}},[e("div",{staticClass:"cellTopColor"},[0==t.BASE_COLOR?e("span"):a._e(),a._v(" "),1==t.BASE_COLOR?e("span",{staticStyle:{background:"#ff0000"}}):a._e(),a._v(" "),2==t.BASE_COLOR?e("span",{staticStyle:{background:"#ffff00"}}):a._e(),a._v(" "),3==t.BASE_COLOR?e("span",{staticStyle:{background:"#009900"}}):a._e(),a._v(a._s(t.HEALTH_BASE_VALUE)+"\n                    "),0==t.NOW_COLOR?e("span"):a._e(),a._v(" "),1==t.NOW_COLOR?e("span",{staticStyle:{background:"#ff0000"}}):a._e(),a._v(" "),2==t.NOW_COLOR?e("span",{staticStyle:{background:"#ffff00"}}):a._e(),a._v(" "),3==t.NOW_COLOR?e("span",{staticStyle:{background:"#009900"}}):a._e(),a._v(a._s(t.HEALTH_CURRENT_VALUE)+"\n                  ")])]),a._v(" "),e("el-col",{attrs:{span:8}},[t.PROJECT_STATUS?e("div",{staticClass:"cellTopState"},[a._v("状态："),e("span",[a._v(a._s(t.PROJECT_STATUS))])]):a._e()])],1)],1),a._v(" "),e("div",{staticClass:"cellContent"},[e("p",[a._v(a._s(t.PROJECT_NAME))]),a._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"tit"},[a._v("销售："+a._s(t.SALESMAN_NAME))])]),a._v(" "),e("el-col",{attrs:{span:12}},[e("span",{staticClass:"tit"},[a._v("项目经理："+a._s(t.PM_REALNAME))])])],1),a._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"tit"},[a._v("开始时间："+a._s(t.START_DATE))])]),a._v(" "),e("el-col",{attrs:{span:12}},[e("span",{staticClass:"tit"},[a._v("结束时间："+a._s(t.END_DATE))])])],1)],1)])],1)})),a._v(" "),e("loadingtmp",{attrs:{busy:a.busy,loadall:a.loadall}})],1)]})],2)],1)],1)},staticRenderFns:[]};var n=e("VU/8")(o,l,!1,function(a){e("xJgr")},"data-v-8aca9eda",null);t.default=n.exports},xJgr:function(a,t){}});