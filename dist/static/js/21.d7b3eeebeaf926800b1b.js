webpackJsonp([21],{"0CE4":function(t,e){},"Bvo+":function(t,e){},JcYH:function(t,e){},"Nrp/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Z1y9"),s={name:"reportBusinessView",components:{},props:["queryData"],data:function(){return{form:{custom:"",program:"",sale:"",PM:"",startTime:this.getFormerTime(1)[0],endTime:this.getCurrentTime(1)[0],industry:""},industryType:[]}},watch:{},created:function(){var t=this;i.a.get("?action=getDict&type=NT_CUSTOMER_INDUSTRY","").then(function(e){console.log("2222",e.data),t.industryType=e.data}),this.form.industry=this.queryData.industry,this.form.custom=this.queryData.custom,this.form.sale=this.queryData.sale,this.form.PM=this.queryData.PM,this.form.program=this.queryData.program,console.log("DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD",this.queryData,this.form)},methods:{onCancel:function(){this.$emit("change",{popBg:!1})},onSearch:function(){var t=this.form;console.log("LLLLLLL",t),this.$emit("search",t);this.$emit("change",{popBg:!1})},noKeyword:function(){document.activeElement.blur()},standardDate:function(t){for(var e=[],a=arguments.length,i=Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return i.forEach(function(t){t.toString().length<2?e.push("0"+t):e.push(t)}),e.join("-")},getFormerTime:function(t){var e=(new Date).getFullYear()-1,a=[];a.unshift(this.standardDate("",e,(new Date).getMonth()+1,(new Date).getDate()));for(var i=1;i<t;i++)a.unshift(e-i+"1231");return a},getCurrentTime:function(t){var e=(new Date).getFullYear(),a=[];a.unshift(this.standardDate("",e,(new Date).getMonth()+1,(new Date).getDate()));for(var i=1;i<t;i++)a.unshift(e-i+"1231");return a}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchView"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"行业"}},[a("el-select",{attrs:{placeholder:"请选择行业",clearable:""},model:{value:t.form.industry,callback:function(e){t.$set(t.form,"industry",e)},expression:"form.industry"}},t._l(t.industryType,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"客户"}},[a("el-input",{staticClass:"bInput",model:{value:t.form.custom,callback:function(e){t.$set(t.form,"custom",e)},expression:"form.custom"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"项目"}},[a("el-input",{staticClass:"bInput",model:{value:t.form.program,callback:function(e){t.$set(t.form,"program",e)},expression:"form.program"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销售"}},[a("el-input",{staticClass:"bInput",model:{value:t.form.sale,callback:function(e){t.$set(t.form,"sale",e)},expression:"form.sale"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"PM"}},[a("el-input",{staticClass:"bInput",model:{value:t.form.PM,callback:function(e){t.$set(t.form,"PM",e)},expression:"form.PM"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"时间段"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"开始月份","value-format":"yyyy-MM"},on:{focus:t.noKeyword},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("~")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"结束月份","value-format":"yyyy-MM"},on:{focus:t.noKeyword},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"searchBtn"},[a("el-button",{on:{click:t.onCancel}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"searchBtnCell",on:{click:t.onSearch}},[t._v("查询")])],1)],1)],1)},staticRenderFns:[]};var n={name:"searchReportFormView",components:{reportBusinessView:a("VU/8")(s,r,!1,function(t){a("hP24")},"data-v-6cdd646a",null).exports},data:function(){return{headerRight:"查询",popBg:!1}},props:["title","searchType","queryData"],methods:{updatePopBg:function(t){console.log("test133333311111111111",t),this.popBg=t.popBg},searchData:function(t){console.log("test111111111111",t),this.$emit("searchPro",t)},back:function(t){this.$router.back(-1)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("div",{staticClass:"headerLeft",on:{click:t.back}},[a("i",{staticClass:"el-icon-arrow-left"})]),t._v(" "),a("h2",[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"headerRight",on:{click:function(e){e.stopPropagation(),t.popBg=!t.popBg}}},[t._v(t._s(t.headerRight))])]),t._v(" "),t.popBg?[a("div",{staticClass:"popBg"},["opnion1"==t.searchType?[a("search-complaint-view",{on:{change:t.updatePopBg,search:t.searchData}})]:"opnion2"==t.searchType?[a("search-complaint-view",{on:{change:t.updatePopBg,search:t.searchData}})]:"opnion3"==t.searchType?[a("search-complaint-view",{on:{change:t.updatePopBg,search:t.searchData}})]:"focusEvent"==t.searchType?[a("focus-search-view",{attrs:{queryData:t.queryData},on:{change:t.updatePopBg,search:t.searchData}})]:a("report-business-view",{attrs:{queryData:t.queryData},on:{change:t.updatePopBg,search:t.searchData}})],2)]:t._e()],2)},staticRenderFns:[]};var c={name:"business",components:{searchReportFormView:a("VU/8")(n,o,!1,function(t){a("Bvo+")},"data-v-c2b38d14",null).exports},data:function(){return{businessViewTit:"业务报表",form:{custom:"",program:"",sale:"",pm:"",startTime:this.getFormerTime(1)[0],endTime:this.getCurrentTime(1)[0],industry:""},industryType:[],chartOneTit:"月度报修数量统计",chartTwoTit:"厂商报修数统计",chartThreeTit:"报障级别统计",chartFourTit:"设备型号报修数统计",chartFiveTit:"技术方向报修数统计",chartSixTit:"备件更换量统计",chartSevenTit:"SLA达成情况统计",oneDataX:[],oneData:[],sixDataX:[],sixData:[],factoryData:[],factoryDataX:[],deviceTypeData:[],deviceModelXData:[],deviceModelYData:[],caseLevelData:[],slaModelXData:[],slaModelYData:[],slaModelXLable:[],searchData:{industry:[]}}},props:["queryData"],created:function(){var t=this;i.a.get("?action=getDict&type=NT_CUSTOMER_INDUSTRY","").then(function(e){t.industryType=e.data}),this.firstFreshCharts()},methods:{freshCharts:function(t){console.log("freshCharts",t),this.fetch1(t),this.fetch2(t),this.fetch3(t),this.fetch4(t),this.fetch5(t),this.fetch6(t),this.fetch7(t)},firstFreshCharts:function(){var t={timeStart:this.form.startTime,timeEnd:this.form.endTime,PROJECT_NAME:this.form.custom,CUST_NAME:this.form.program,INDUSTRY:this.form.industry};console.log("firstFreshCharts",t),this.fetch1(t),this.fetch2(t),this.fetch3(t),this.fetch4(t),this.fetch5(t),this.fetch6(t),this.fetch7(t)},getSearParams:function(t){console.log("searchData",t),this.searchData=t,this.getChartData()},getChartData:function(){var t={};t.PM_NAME=this.searchData.PM,t.PROJECT_NAME=this.searchData.program,t.INDUSTRY=this.searchData.industry,t.CUST_NAME=this.searchData.custom,t.SALE_NAME=this.searchData.sale,t.timeStart=this.searchData.startTime,t.timeEnd=this.searchData.endTime,console.log("params",t),this.freshCharts(t)},noKeyword:function(){document.activeElement.blur()},crtTimeFtt:function(t){if(null!=t){var e=new Date(t),a=e.getMonth()+1;return a<10&&(a="0"+a),e.getFullYear()+"-"+a}},fetch1:function(t){var e=this;i.a.get("?action=GetStatisticsCaseData&dimensionType=date&timeRangeType=month",t).then(function(t){console.log("fetch1",t);for(var a=t.DATA,i=[],s=[],r=0;r<a.length;r++)s[r]=a[r].DIMENSIONTYPE,i[r]=a[r].NUMS;e.oneData=i,e.oneDataX=s,e.drawLineOne()})},fetch2:function(t){var e=this;i.a.get("?action=GetStatisticsCaseData&dimensionType=factory&timeRangeType=month",t).then(function(t){console.log("fetch2",t);for(var a=t.DATA,i=[],s=[],r=0;r<a.length;r++)i[r]={},i[r].name=a[r].DIMENSIONTYPE,i[r].value=a[r].NUMS,s[r]=a[r].DIMENSIONTYPE;e.factoryData=i,e.factoryDataX=s,e.drawLineTwo()})},fetch5:function(t){var e=this;i.a.get("?action=GetStatisticsCaseData&dimensionType=deviceType&timeRangeType=month",t).then(function(t){console.log("fetch5",t);for(var a=t.DATA,i=[],s=0;s<a.length;s++)i[s]={},i[s].name=a[s].DIMENSIONTYPE,i[s].value=a[s].NUMS;e.deviceTypeData=i,e.drawLineFive()})},fetch4:function(t){var e=this;i.a.get("?action=GetStatisticsCaseData&dimensionType=deviceModel&timeRangeType=month",t).then(function(t){for(var a=t.DATA,i=[],s=[],r=0;r<a.length;r++)i[r]=a[r].DIMENSIONTYPE,s[r]=a[r].NUMS;e.deviceModelXData=i,e.deviceModelYData=s,e.drawLineFour()})},fetch3:function(t){var e=this;i.a.get("?action=GetStatisticsCaseData&dimensionType=caseLevel&timeRangeType=month",t).then(function(t){var a=t.DATA,i=[];if(void 0!==a){for(var s=0;s<a.length;s++)i[s]={},i[s].name=a[s].DIMENSIONTYPE,i[s].value=a[s].NUMS;e.caseLevelData=i,e.drawLineThree()}})},fetch6:function(t){var e=this;i.a.get("?action=GetStatisticsCaseData&dimensionType=partUse&timeRangeType=month",t).then(function(t){for(var a=t.DATA,i=[],s=[],r=0;r<a.length;r++)s[r]=a[r].DIMENSIONTYPE,i[r]=a[r].NUMS;e.sixData=i,e.sixDataX=s,e.drawLineSix()})},fetch7:function(t){var e=this;console.log("ASDFGHASDFG");i.a.get("?action=/report/GetStatisticsSLA",t).then(function(t){console.log("fetch7:",t);for(var a=t.data,i=[],s=[],r=[],n=[],o=[],c=a.length-1;c>=0;c--)(s=[])[0]=a[c].SLA_TYPE,s[1]=a[c].NUMS,s[2]=a[c].SLA_RATIO,r[a.length-c-1]=s,i[a.length-c-1]=a[c].SLA_RATIO,o[a.length-c-1]=a[c].SLA_TYPE;n.push(i),n.push(r),e.slaModelXConcat=n,e.slaModelYData=o,e.drawLineSeven()})},drawLineSeven:function(){var t=document.getElementById("myChartSeven");t.style.height="300px",this.myChartSeven=echarts.init(t),this.myChartSeven.setOption({grid:{top:"5%",left:"0",right:"4%",bottom:"2%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:this.slaModelYData},series:[{name:this.slaModelXConcat[1],type:"bar",data:this.slaModelXConcat[0],barWidth:20,itemStyle:{normal:{color:"#66CD00",label:{show:!0,formatter:function(t){for(var e=[],a=t.seriesName.split(","),i=0;i<a.length;i+=3)e.push(a.slice(i,i+3));for(i=0;i<e.length;i++)if(t.name==e[i][0])return e[i][1].toString()+" "+e[i][2].toString()+"%"},position:"inside"},labelLine:{show:!0}}}}]})},drawLineOne:function(){var t=document.getElementById("myChartOne");this.myChartOne=echarts.init(t),this.myChartOne.setOption({color:["#3398DB"],grid:{top:"5%",left:"0",right:"0",bottom:"2%",containLabel:!0},xAxis:[{type:"category",data:this.oneDataX,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"直接访问",type:"bar",barWidth:"50%",data:this.oneData,label:{normal:{show:!0,position:"inside"}}}]})},drawLineTwo:function(){console.log(this.factoryDataX);var t=document.getElementById("myChartTwo");this.myChartTwo=echarts.init(t),this.myChartTwo.setOption({legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,data:this.factoryDataX},series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],label:{emphasis:{show:!0,textStyle:{fontSize:"15",fontWeight:"bold"}}},data:this.factoryData,itemStyle:{normal:{label:{show:!0,formatter:"{b} : {c} \n ({d}%)"},labelLine:{show:!0}}}}]})},drawLineFive:function(){var t=document.getElementById("myChartFive");this.myChartFive=echarts.init(t),this.myChartFive.setOption({series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:this.deviceTypeData,labelLine:{normal:{show:!0}},label:{emphasis:{show:!0,textStyle:{fontSize:"15",fontWeight:"bold"}}},itemStyle:{normal:{label:{show:!0,formatter:"{b} : {c} \n ({d}%)"},labelLine:{show:!0}}}}]})},drawLineFour:function(){var t=document.getElementById("myChartFour");t.style.height="300px",this.myChartFour=echarts.init(t),this.myChartFour.setOption({grid:{top:"5%",left:"0",right:"4%",bottom:"2%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:this.deviceModelXData},series:[{name:"2011年",type:"bar",data:this.deviceModelYData,itemStyle:{normal:{label:{show:!0,formatter:"{c}",position:"right"},labelLine:{show:!0}}}}]})},drawLineThree:function(){var t=document.getElementById("myChartThree");this.myChartThree=echarts.init(t),this.myChartThree.setOption({series:[{name:"访问来源",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{emphasis:{show:!0,textStyle:{fontSize:"15",fontWeight:"bold"}}},startAngle:0,minAngle:10,labelLine:{normal:{show:!0}},data:this.caseLevelData,itemStyle:{normal:{label:{show:!0,formatter:"{b} : {c}  ({d}%)"},labelLine:{show:!0},position:"top"}}}]})},drawLineSix:function(){var t=document.getElementById("myChartSix");this.myChartSix=echarts.init(t),this.myChartSix.setOption({color:["red"],grid:{top:"5%",left:"0",right:"0",bottom:"2%",containLabel:!0},xAxis:[{type:"category",data:this.sixDataX,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"直接访问",type:"bar",barWidth:"50%",data:this.sixData,label:{normal:{show:!0,position:"inside"}}}]})},standardDate:function(t){for(var e=[],a=arguments.length,i=Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return i.forEach(function(t){t.toString().length<2?e.push("0"+t):e.push(t)}),e.pop(),e.join("-")},getFormerTime:function(t){var e=(new Date).getFullYear()-1,a=[];a.unshift(this.standardDate("",e,(new Date).getMonth()+1,(new Date).getDate()));for(var i=1;i<t;i++)a.unshift(e-i+"1231");return a},getCurrentTime:function(t){var e=(new Date).getFullYear(),a=[];a.unshift(this.standardDate("",e,(new Date).getMonth()+1,(new Date).getDate()));for(var i=1;i<t;i++)a.unshift(e-i+"1231");return a}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"businessView"},[a("search-report-form-view",{attrs:{title:t.businessViewTit,queryData:t.searchData},on:{searchPro:t.getSearParams}}),t._v(" "),a("div",{staticClass:"echartsView"},[a("div",{staticClass:"chartOne"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartOneTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartOne"}})]),t._v(" "),a("div",{staticClass:"chartTwo"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartTwoTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartTwo"}})]),t._v(" "),a("div",{staticClass:"chartThree"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartThreeTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartThree"}})]),t._v(" "),a("div",{staticClass:"chartFour"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartFourTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartFour"}})]),t._v(" "),a("div",{staticClass:"chartFive"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartFiveTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartFive"}})]),t._v(" "),a("div",{staticClass:"chartSix"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartSixTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartSix"}})]),t._v(" "),a("div",{staticClass:"chartSeven"},[a("div",{staticClass:"BtmTit"},[t._v(t._s(t.chartSevenTit))]),t._v(" "),a("div",{style:{width:"100%",height:"2rem"},attrs:{id:"myChartSeven"}})])])],1)},staticRenderFns:[]};var l={name:"reportBusinessForm",components:{business:a("VU/8")(c,h,!1,function(t){a("JcYH")},"data-v-22d809ef",null).exports},data:function(){return{activeName:"first",display:!1,searchData:{industry:[]}}},mounted:function(){var t=JSON.parse(localStorage.getItem("userPermission"));console.log(t);for(var e=0;e<t.length;e++)"topApp_report_quality_view"==t[e].PRIVID&&(this.display=!0)},methods:{}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportBusinessView"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"业务",name:"first"}},[a("business")],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(l,m,!1,function(t){a("0CE4")},"data-v-6713962c",null);e.default=d.exports},hP24:function(t,e){}});