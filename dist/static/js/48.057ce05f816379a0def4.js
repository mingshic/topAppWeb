webpackJsonp([48],{OJEo:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});a("YF26");var e=a("Z1y9"),l=a("77PY"),i=a("DxVv"),n={name:"eventList",components:{headerBase:l.a,loadingtmp:i.a},data:function(){return{eventListTit:"需关注事件",searchType:"focusEvent",eventListArr:[],page:1,pageSize:10,busy:!0,loadall:!1,isSearch:!1,searchData:{industry:[]},totalData:0}},activated:function(){console.log(this.$route.meta.savedPosition),this.$route.meta.isUseCache||(this.eventListArr=[],this.page=1,this.loadall=!1,this.busy=!1,this.loadMore()),this.$route.meta.isUseCache=!1},methods:{getEventList:function(){var t=this,s={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize};this.isSearch&&(s.INDUSTRY_NAME=this.searchData.industry.join(","),s.CASE_TYPE=this.searchData.type.join(","),s.CUST_NAME=this.searchData.customer,s.PROJECT_NAME=this.searchData.proName,s.PM_NAME=this.searchData.PM,s.CASE_CD=this.searchData.eventNum,s.KEYWORD=this.searchData.keyWord,s.SALE_NAME=this.searchData.sale,s.START_TIME=this.searchData.startTime,s.END_TIME=this.searchData.endTime),console.log(s);var a=this.page>1;e.a.get("?action=GetFocusCase",s).then(function(s){console.log(s),t.totalData=s.total,t.eventListArr=a?t.eventListArr.concat(s.data):s.data,0==s.data.length||s.data.length<t.pageSize?(t.busy=!1,t.loadall=!0):(t.busy=!1,t.page++)})},loadMore:function(){var t=this;this.busy||this.loadall||(this.busy=!0,setTimeout(function(){t.getEventList()},500))},searchList:function(t){console.log("formData",t),this.searchData=t,this.eventListArr=[],this.isSearch=!0,this.page=1,this.loadall=!1,this.loadMore()}},created:function(){},beforeRouteLeave:function(t,s,a){"home"==t.name&&(t.meta.isUseCache=!0),a()}},o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"eventListView"},[a("header-base",{attrs:{title:t.eventListTit+"("+t.totalData+")",searchType:t.searchType,queryData:t.searchData},on:{searchPro:t.searchList}}),t._v(" "),a("div",{staticStyle:{height:"0.45rem"}}),t._v(" "),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"content",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[t._l(t.eventListArr,function(s){return a("div",{key:s.CASEID,staticClass:"eventCell"},[a("router-link",{attrs:{to:{name:"eventShow",query:{caseId:s.CASEID}}}},[a("div",{staticClass:"cellTop"},[a("el-row",[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"spheathcolor",class:"spheathcolor"+s.CASEHEALTH}),t._v("  "+t._s(s.CODE)+"\n          ")]),t._v(" "),a("el-col",{attrs:{span:4}},["一级"===s.CASELEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor1"},[t._v(t._s(s.CASELEVEL))]):t._e(),t._v(" "),"二级"===s.CASELEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor2"},[t._v(t._s(s.CASELEVEL))]):t._e(),t._v(" "),"三级"===s.CASELEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor3"},[t._v(t._s(s.CASELEVEL))]):t._e(),t._v(" "),"四级"===s.CASELEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor4"},[t._v(t._s(s.CASELEVEL))]):t._e(),t._v(" "),"五级"===s.CASELEVEL?a("span",{staticClass:"speventlevel",class:"speventlevelcolor5"},[t._v(t._s(s.CASELEVEL))]):t._e()]),t._v(" "),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"cellTopTime"},[a("span",[t._v(t._s(s.DATE_TIME))]),a("span",{staticStyle:{"margin-left":"0.05rem"}})])])],1)],1),t._v(" "),a("div",{staticClass:"cellContent"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("厂商：")]),a("span",[t._v(t._s(s.FACTORY_NM))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("型号：")]),a("span",[t._v(t._s(s.MODEL_NAME))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("客户：")]),a("span",[t._v(t._s(s.CUSTOM))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("城市：")]),a("span",[t._v(t._s(s.CITY))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("状态：")]),a("span",[t._v(t._s(s.CASE_STATUS))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"tit"},[t._v("类型：")]),a("span",[t._v(t._s(s.TYPE))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"tit"},[t._v("case描述：")]),a("span",[t._v(t._s(s.REASON))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"tit"},[t._v("关注原因：")]),a("span",[t._v(t._s(s.ITEM))])])],1)],1)])],1)}),t._v(" "),a("loadingtmp",{attrs:{busy:t.busy,loadall:t.loadall}})],2)],1)},staticRenderFns:[]};var c=a("VU/8")(n,o,!1,function(t){a("WDwo")},"data-v-c384f81c",null);s.default=c.exports},WDwo:function(t,s){}});