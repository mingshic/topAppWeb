webpackJsonp([35],{"0TKA":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Z1y9"),a={name:"headerLast",data:function(){return{caseId:this.$route.query.caseId,workId:this.$route.query.workId,taskId:this.$route.query.taskId}},props:["title","backUrl","date1","date2"],methods:{newService:function(e){var t=this;2==e?(console.log(this.serviceId),this.serviceId||i.a.get("?action=/work/SubmitSceneServiceFormInfo&CASE_ID="+this.caseId+"&WORK_ID="+this.workId+"&TASK_ID="+this.taskId).then(function(s){console.log(s);var i=s.TEMP;t.$router.push({name:"onsiteServiceInfo",query:{serviceId:i.serviceId,caseId:t.caseId,workId:t.workId,taskId:t.taskId,evaluateId:i.evaluateId,serviceType:e}})})):this.serviceId||i.a.get("?action=/work/SubmitCaseTroubleShootingServiceFormInfo&CASE_ID="+this.caseId+"&WORK_ID="+this.workId+"&TASK_ID="+this.taskId).then(function(s){console.log(s);var i=s.TEMP;t.$router.push({name:"onsiteServiceInfo",query:{serviceId:i.serviceId,evaluateId:i.evaluateId,caseId:t.caseId,workId:t.workId,taskId:t.taskId,serviceType:e}})})},back:function(e){console.log("in back"),this.backUrl&&this.backUrl.length>0?(console.log("route backurl"),this.$router.push({name:this.backUrl,query:{date1:this.date1,date2:this.date2}})):this.$router.back(-1)}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"headerView"},[s("header",[s("div",{staticClass:"headerLeft ",on:{click:e.back}},[s("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),s("h2",[e._v(e._s(e.title))]),e._v(" "),s("el-dropdown",{attrs:{trigger:"click"}},[s("div",{staticClass:"el-icon-plus"}),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(t){e.newService(2)}}},[e._v("创建现场服务单")]),e._v(" "),s("el-dropdown-item",{nativeOn:{click:function(t){e.newService(1)}}},[e._v("创建case故障处理服务单")])],1)],1)],1)])},staticRenderFns:[]};var n={name:"serviceList",components:{headerBaseNine:s("VU/8")(a,r,!1,function(e){s("4Pju")},"data-v-687e6f6a",null).exports,loadingtmp:s("DxVv").a},data:function(){return{serviceListTit:"服务单一览表",workId:this.$route.query.workId,caseId:this.$route.query.caseId,taskId:this.$route.query.taskId,page:1,pageSize:10,busy:!0,loadall:!1,serviceList:[]}},activated:function(){this.$route.meta.isUseCache||(this.serviceList=[],this.busy=!1,this.loadall=!1,this.page=1,this.loadMore()),this.$route.meta.isUseCache=!1},methods:{getEventList:function(){var e=this,t={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize},s=this.page>1;i.a.get("?action=/work/GetServiceFormList&WORK_ID="+this.$route.query.workId+"&CASE_ID="+this.$route.query.caseId,t).then(function(t){console.log(t),e.serviceList=s?e.serviceList.concat(t.DATA):t.DATA,0==t.DATA.length||t.DATA.length<e.pageSize?(e.busy=!1,e.loadall=!0):(e.busy=!1,e.page++)})},loadMore:function(){var e=this;this.busy||this.loadall||(this.busy=!0,setTimeout(function(){e.getEventList()},500))},beforeRouteLeave:function(e,t,s){console.log(e),"workBenchTaskDetailInfo"==e.name&&(e.meta.isUseCache=!0),s()}},created:function(){var e=this;i.a.get("?action=/work/GetServiceFormList&WORK_ID="+this.workId+"&CASE_ID="+this.caseId,{}).then(function(t){console.log(t),e.serviceList=t.DATA})}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"serviceListView"},[s("header-base-nine",{attrs:{title:e.serviceListTit}}),e._v(" "),s("div",{staticStyle:{height:"0.45rem"}}),e._v(" "),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"content",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[e._l(e.serviceList,function(t){return s("div",{key:t.id,staticClass:"taskListCell"},[s("router-link",{attrs:{to:{name:"onsiteServiceInfo",query:{caseId:t.caseId,serviceId:t.serviceId,workId:t.workId,taskId:t.taskId,evaluateId:t.evaluateId,serviceType:t.serviceType}}}},[s("ul",{staticClass:"tableTd"},[s("li",[s("span",[e._v("服务单号")]),e._v(" "),s("span",{staticStyle:{color:"#2698d6"}},[e._v(e._s(t.serviceCd))])]),e._v(" "),s("li",[s("span",[e._v("评价ID")]),e._v(" "),s("span",[e._v(e._s(t.evaluateId))])]),e._v(" "),s("li",[s("span",[e._v("服务单类型")]),e._v(" "),s("span",[e._v(e._s(t.serviceTypeName))])]),e._v(" "),s("li",[s("span",[e._v("工程师")]),e._v(" "),s("span",[e._v(e._s(t.realname))])]),e._v(" "),s("li",[s("span",[e._v("发起日期")]),e._v(" "),s("span",[e._v(e._s(t.createdOn))])]),e._v(" "),s("li",[s("span",[e._v("服务单状态")]),e._v(" "),s("span",[e._v(e._s(t.serviceStatusName))])]),e._v(" "),s("li",[s("span",[e._v("客户确认日期")]),e._v(" "),s("span",[e._v(e._s(t.custDate))])])])])],1)}),e._v(" "),s("loadingtmp",{attrs:{busy:e.busy,loadall:e.loadall}})],2)],1)},staticRenderFns:[]};var c=s("VU/8")(n,o,!1,function(e){s("jZRE")},"data-v-1d2e949d",null);t.default=c.exports},"4Pju":function(e,t){},jZRE:function(e,t){}});