webpackJsonp([23],{JyGP:function(e,t){},ZhIK:function(e,t){},rHhk:function(e,t){},xmZG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Z1y9"),i={name:"searchSupplierOfCity",components:{},props:["queryData"],data:function(){return{form:{kindName:"",attName:"",cattName:""},kindNameArr:[{name:"人员",value:"人员"},{name:"备件",value:"备件"},{name:"物流",value:"物流"},{name:"运维分包",value:"运维分包"},{name:"外包分包",value:"外包分包"}],attNameArr:[{name:"原厂",value:"原厂"},{name:"代理",value:"代理"},{name:"第三方",value:"第三方"}],cattNameArr:[{name:"公司",value:"公司"},{name:"个人",value:"个人"}]}},watch:{},created:function(){this.form.kindName=this.queryData.kindName,this.form.attName=this.queryData.attName,this.form.cattName=this.queryData.cattName},methods:{onCancel:function(){this.$emit("change",{popBg:!1})},onSearch:function(){var e=this.form;this.$emit("search",e);this.$emit("change",{popBg:!1})},noKeyword:function(){document.activeElement.blur()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchSupplierOfCityView"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"供应种类"}},[a("el-select",{attrs:{placeholder:"供应种类",clearable:""},model:{value:e.form.kindName,callback:function(t){e.$set(e.form,"kindName",t)},expression:"form.kindName"}},e._l(e.kindNameArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"供应属性"}},[a("el-select",{attrs:{placeholder:"供应属性",clearable:""},model:{value:e.form.attName,callback:function(t){e.$set(e.form,"attName",t)},expression:"form.attName"}},e._l(e.attNameArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"合作属性"}},[a("el-select",{attrs:{placeholder:"合作属性",clearable:""},model:{value:e.form.cattName,callback:function(t){e.$set(e.form,"cattName",t)},expression:"form.cattName"}},e._l(e.cattNameArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticClass:"searchBtn"},[a("el-button",{on:{click:e.onCancel}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"searchBtnCell",on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1)},staticRenderFns:[]};var o={name:"headerBaseEleven",components:{searchSupplierOfCity:a("VU/8")(i,r,!1,function(e){a("JyGP")},"data-v-975347e4",null).exports},data:function(){return{headerRight:"查询",popBg:!1}},props:["title","queryData"],watch:{},created:function(){},methods:{updatePopBg:function(e){console.log(e+"=========="),console.log(e.popBg),this.popBg=e.popBg},searchData:function(e){this.$emit("searchPro",e)},back:function(e){this.$router.back(-1)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"headerView"},[a("header",[a("div",{staticClass:"headerLeft",on:{click:e.back}},[a("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),a("h2",[e._v(e._s(e.title))]),e._v(" "),a("div",{staticClass:"headerRight",on:{click:function(t){t.stopPropagation(),e.popBg=!e.popBg}}},[e._v(e._s(e.headerRight))])]),e._v(" "),e.popBg?[a("div",{staticClass:"popBg"},[a("search-supplier-of-city",{attrs:{queryData:e.queryData},on:{change:e.updatePopBg,search:e.searchData}})],1)]:e._e()],2)},staticRenderFns:[]};var s={name:"workBenchSupplierInfoOfCity",components:{headerBaseEleven:a("VU/8")(o,l,!1,function(e){a("ZhIK")},"data-v-4985544e",null).exports},data:function(){return{workBenchSupplierInfoTit:"供应商信息",tableData:[],workBenchSupplierInfoOfCityObj:[{prop:"SUPPLIER_NAME",label:"名称",width:"25%"},{prop:"KIND_NAME",label:"供应种类",width:"25%"},{prop:"ATT_NAME",label:"供应属性",width:"25%"},{prop:"C_ATT_NAME",label:"合作属性",width:"25%"}],page:1,pageSize:30,busy:!0,loadall:!1,tableHeight:400,isSearch:!1,searchData:{}}},created:function(){this.getSupplierInfoList()},mounted:function(){var e=this;this.$nextTick(function(){var t=e;console.log("ssssssss",e.type),e.tableHeight=document.documentElement.clientHeight-45,window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-45}})},methods:{getSupplierInfoList:function(){var e=this,t={PAGE_NUM:this.page,PAGE_TOTAL:this.pageSize,PROVINCE_NAME:this.$route.query.provinceName,KIND_NAME:this.$route.query.kindName};this.isSearch&&(t.KIND_NAME=this.searchData.kindName,t.ATT_NAME=this.searchData.attName,t.C_ATT_NAME=this.searchData.cattName),console.log(t);var a=this.page>1;n.a.get("?action=/supplier/GetSupplierList",t).then(function(t){console.log("222222",t),e.tableData=a?e.tableData.concat(t.data):t.data,0==t.data.length||t.data.length<e.pageSize?(e.busy=!0,e.loadall=!0,e.$message({message:"已加载全部数据",type:"success",center:!0,duration:1e3,customClass:"msgdefine"})):(e.busy=!1,e.page++)})},rowClick:function(e){console.log("row",e),this.$router.push({name:"workBenchSupplierDetailInfo",query:{supplierId:e.SUPPLIER_ID}})},loadMore:function(){var e=this;if(this.busy)return!1;this.busy=!0,setTimeout(function(){e.getSupplierInfoList()},1e3)},searchList:function(e){console.log("formData:",e),this.searchData=e,this.tableData=[],this.busy=!1,this.isSearch=!0,this.page=1,this.loadall=!1,this.loadMore()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"workBenchSupplierInfoOfCityView"},[a("header-base-eleven",{attrs:{title:e.workBenchSupplierInfoTit,queryData:e.searchData},on:{searchPro:e.searchList}}),e._v(" "),a("div",{staticStyle:{height:"0.45rem"}}),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.busy&&!e.loadall,expression:"busy && !loadall"},{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{stripe:"","element-loading-text":"加载中",data:e.tableData,height:e.tableHeight},on:{"row-click":e.rowClick}},[e._l(e.workBenchSupplierInfoOfCityObj,function(e){return[a("el-table-column",{key:e.id,attrs:{prop:e.prop,label:e.label,"min-width":e.width}})]})],2)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(e){a("rHhk")},"data-v-804a28a0",null);t.default=u.exports}});